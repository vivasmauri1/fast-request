import{i as U}from"./app-io1X_paZ.js";import{f as st,V as G,a as w,b as Ni,l as m,o as P,p as u,i as Ui,g as Ie,h as vi,j as je,e as c,D as R,k as W,C as y,T as j,m as H,n as Gi,q as Ki,r as x,I as Wi,s as $,t as mt,v as Qi,w as Xi,x as Q,y as S,c as at,z as k,A as C,S as rt,u as T,B as Ft,E as Z,F as O,G as Ht,J as Pi,K as tt,L as Nt,M as Yi,$ as L,N as et,O as V,P as F,Q as xi,R as it,U as ce,W as Si,X as Ve,Y as Re,Z as zi,_ as Ai,a0 as Rs,a1 as Ei,a2 as Tt,a3 as ht,a4 as Bi,a5 as _s,a6 as pe,a7 as _e,a8 as Ji,a9 as Zi,aa as qt,ab as Ut,ac as Ci,ad as q,ae as N,af as ta,ag as ea,ah as sa,ai as ia,aj as Fs,ak as aa,al as na,am as ra,an as ha,ao as oa,ap as Hs,aq as fe,ar as ca,as as la,at as Vt,au as Ns,av as da,aw as ua,ax as pa,ay as fa,az as ma,aA as ba,aB as ga,aC as ya}from"./vidstack-CSaHpIQV-DeQqZ8Mz.js";const $a=Symbol(0),ka=Symbol(0),K={Wa:$a,Ia:ka};function me(h){return h instanceof Error?h:Error(typeof h=="string"?h:JSON.stringify(h))}function z(h,t){if(!h)throw Error("Assertion failed.")}function M(h,t=2){return Number(h.toFixed(t))}function wa(h){var t;return((t=String(h).split(".")[1])==null?void 0:t.length)??0}function Fe(h,t,e){return Math.max(h,Math.min(e,t))}const we=st.fullscreenEnabled;class Ta extends G{constructor(){super(...arguments),this.dc=!1,this.Pd=!1}get active(){return this.Pd}get supported(){return we}onConnect(){m(st,"fullscreenchange",this.Qd.bind(this)),m(st,"fullscreenerror",this.Zc.bind(this)),P(this.Fa.bind(this))}async Fa(){we&&await this.exit()}Qd(t){const e=be(this.el);e!==this.Pd&&(e||(this.dc=!1),this.Pd=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}Zc(t){this.dc&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.dc=!1)}async enter(){try{return this.dc=!0,!this.el||be(this.el)?void 0:(Us(),st.requestFullscreen(this.el))}catch(t){throw this.dc=!1,t}}async exit(){if(!(!this.el||!be(this.el)))return Us(),st.exitFullscreen()}}function be(h){if(st.fullscreenElement===h)return!0;try{return h.matches(st.fullscreenPseudoClass)}catch{return!1}}function Us(){if(!we)throw Error("[vidstack] no fullscreen API")}const Xt=class Xt extends G{constructor(){super(...arguments),this.la=w(this.Jf()),this.Cb=w(!1)}get type(){return this.la()}get locked(){return this.Cb()}get portrait(){return this.la().startsWith("portrait")}get landscape(){return this.la().startsWith("landscape")}get supported(){return Xt.supported}onConnect(){if(this.supported)m(screen.orientation,"change",this.Kf.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.Kf.bind(this),P(()=>t.onchange=null)}P(this.Fa.bind(this))}async Fa(){this.supported&&this.Cb()&&await this.unlock()}Kf(t){this.la.set(this.Jf()),this.dispatch("orientation-change",{detail:{orientation:u(this.la),lock:this._c},trigger:t})}async lock(t){u(this.Cb)||this._c===t||(this.Lf(),await screen.orientation.lock(t),this.Cb.set(!0),this._c=t)}async unlock(){u(this.Cb)&&(this.Lf(),this._c=void 0,await screen.orientation.unlock(),this.Cb.set(!1))}Lf(){if(!this.supported)throw Error("[vidstack] no orientation API")}Jf(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};Xt.supported=Ni();let Gt=Xt;function Te(h){return!S(h)&&"width"in h&&"height"in h&&W(h.width)&&W(h.height)}class va{constructor(t=void 0){this.bc=t,this.G=null,this.f=null,this.Rd=-1}setTarget(t){this.G=t}getPlayer(t){var e;return this.f?this.f:((e=t??this.G)==null||e.dispatchEvent(new R("find-media-player",{detail:s=>void(this.f=s),bubbles:!0,composed:!0})),this.f)}setPlayer(t){this.f=t}startLoading(t){this.s("media-start-loading",t)}startLoadingPoster(t){this.s("media-poster-start-loading",t)}requestAirPlay(t){this.s("media-airplay-request",t)}requestGoogleCast(t){this.s("media-google-cast-request",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,e){this.s("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.s("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.s("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,e){this.s("media-seeking-request",e,t)}seek(t,e){this.s("media-seek-request",e,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,e){this.s("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.s("media-audio-track-change-request",e,t)}changeQuality(t,e){this.s("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.s("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.s("media-rate-change-request",e,t)}changeAudioGain(t,e){this.s("media-audio-gain-change-request",e,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e==null?void 0:e.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){const e=this.getPlayer(t==null?void 0:t.target);if(!e)return;let s=e.state.textTracks,i=this.Rd;(!s[i]||!V(s[i]))&&(i=-1),i===-1&&(i=s.findIndex(a=>V(a)&&a.default)),i===-1&&(i=s.findIndex(a=>V(a))),i>=0&&this.changeTextTrackMode(i,"showing",t),this.Rd=-1}disableCaptions(t){const e=this.getPlayer(t==null?void 0:t.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const a=s.indexOf(i);this.changeTextTrackMode(a,"disabled",t),this.Rd=a}}toggleCaptions(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){this.s("media-user-loop-change-request",e,t)}s(t,e,s){var r,o;const i=new R(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let a=(e==null?void 0:e.target)||null;a&&a instanceof y&&(a=a.el),a=!a||a===document||a===window||a===document.body||((r=this.f)==null?void 0:r.el)&&a instanceof Node&&!this.f.el.contains(a)?this.G??((o=this.getPlayer())==null?void 0:o.el):a??this.G,this.f?t==="media-play-request"&&!this.f.state.canLoad?a==null||a.dispatchEvent(i):this.f.canPlayQueue.k(t,()=>a==null?void 0:a.dispatchEvent(i)):a==null||a.dispatchEvent(i)}Va(t){}}class ot extends G{}class Pa extends ot{constructor(){super(...arguments),this.Sd=-2,this.Gb=!1,this.Sf=w(!1),this.Td=w(!1),this.ec=null,this.Ud=w(!0),this.defaultDelay=2e3}get canIdle(){return this.Ud()}set canIdle(t){this.Ud.set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.Sf()||t()}set hideOnMouseLeave(t){this.Sf.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.Vd(),this.Gb||this.ad(!0,t,e)}hide(t=this.defaultDelay,e){this.Vd(),this.Gb||this.ad(!1,t,e)}pause(t){this.Gb=!0,this.Vd(),this.ad(!0,0,t)}resume(t){this.Gb=!1,!this.$state.paused()&&this.ad(!1,this.defaultDelay,t)}onConnect(){c(this.Hb.bind(this))}Hb(){const{viewType:t}=this.$state;if(!this.Ud())return;if(t()==="audio"){this.show();return}c(this.$h.bind(this)),c(this.fc.bind(this));const e=this.gc.bind(this),s=this.ib.bind(this);this.listen("can-play",i=>this.show(0,i)),this.listen("play",e),this.listen("pause",s),this.listen("auto-play-fail",s)}$h(){const{started:t,pointer:e,paused:s}=this.$state;if(!t()||e()!=="fine")return;const i=this.hideOnMouseLeave;(!i||!this.Td())&&c(()=>{s()||this.listen("pointermove",this.Tf.bind(this))}),i&&(this.listen("mouseenter",this.ai.bind(this)),this.listen("mouseleave",this.bi.bind(this)))}fc(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const i=this.Tf.bind(this);c(()=>{const a=this.$state.pointer(),n=a==="coarse",r=[n?"touchend":"pointerup","keydown"];for(const o of r)this.listen(o,i,{passive:!1})})}gc(t){this.show(0,t),this.hide(void 0,t)}ib(t){this.show(0,t)}ai(t){this.Td.set(!1),this.show(0,t),this.hide(void 0,t)}bi(t){this.Td.set(!0),this.hide(0,t)}Vd(){window.clearTimeout(this.Sd),this.Sd=-1}Tf(t){var e;t.MEDIA_GESTURE||this.Gb||_e(t)||(Ai(t)&&(t.key==="Escape"?((e=this.el)==null||e.focus(),this.ec=null):this.ec&&(t.preventDefault(),requestAnimationFrame(()=>{var s;(s=this.ec)==null||s.focus(),this.ec=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}ad(t,e,s){if(e===0){this.E(t,s);return}this.Sd=window.setTimeout(()=>{this.scope&&this.E(t&&!this.Gb,s)},e)}E(t,e){var s;this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&((s=this.el)!=null&&s.contains(document.activeElement))&&(this.ec=document.activeElement,requestAnimationFrame(()=>{var i;(i=this.el)==null||i.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))}}var ct=xa;function xa(h,t,e){var s=null,i=null,a=e&&e.leading,n=e&&e.trailing;a==null&&(a=!0),n==null&&(n=!a),a==!0&&(n=!1);var r=function(){s&&(clearTimeout(s),s=null)},o=function(){var l=i;r(),l&&l()},d=function(){var l=a&&!s,p=this,f=arguments;if(i=function(){return h.apply(p,f)},s||(s=setTimeout(function(){if(s=null,n)return i()},t)),l)return l=!1,i()};return d.cancel=r,d.flush=o,d}class Sa{constructor(){this.playerId="vds-player",this.mediaId=null,this.H={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTimeThrottled=ct(this.saveTime.bind(this),1e3)}async getVolume(){return this.H.volume}async setVolume(t){this.H.volume=t,this.save()}async getMuted(){return this.H.muted}async setMuted(t){this.H.muted=t,this.save()}async getTime(){return this.H.time}async setTime(t,e){const s=t<0;this.H.time=s?null:t,s||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.H.lang}async setLang(t){this.H.lang=t,this.save()}async getCaptions(){return this.H.captions}async setCaptions(t){this.H.captions=t,this.save()}async getPlaybackRate(){return this.H.rate}async setPlaybackRate(t){this.H.rate=t,this.save()}async getAudioGain(){return this.H.audioGain}async setAudioGain(t){this.H.audioGain=t,this.save()}async getVideoQuality(){return this.H.quality}async setVideoQuality(t){this.H.quality=t,this.save()}onChange(t,e,s="vds-player"){const i=s?localStorage.getItem(s):null,a=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.H={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...i?JSON.parse(i):{},time:a?+a:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.H,time:void 0});localStorage.setItem(this.playerId,t)}saveTime(){if(!this.mediaId)return;const t=(this.H.time??0).toString();localStorage.setItem(this.mediaId,t)}}class Aa{constructor(){this.priority=0,this.Uf=!0,this.m=null,this.J=null,this.va=new Set}canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.E.bind(this))}addTrack(t){this.va.add(t),this.ci(t)}removeTrack(t){var e,s;(s=(e=t[j._])==null?void 0:e.remove)==null||s.call(e),t[j._]=null,this.va.delete(t)}changeTrack(t){const e=t==null?void 0:t[j._];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.J=t}setDisplay(t){this.Uf=t,this.E()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.va)this.removeTrack(t);this.va.clear(),this.m=null,this.J=null}ci(t){var s;if(!this.m)return;const e=t[s=j._]??(t[s]=this.di(t));Tt(e)&&(this.m.append(e),e.track.mode=e.default?"showing":"disabled")}di(t){const e=document.createElement("track"),s=t.default||t.mode==="showing",i=t.src&&t.type==="vtt";return e.id=t.id,e.src=i?t.src:"",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.Vf(t,e.track),e}Vf(t,e){var s;if(!(t.src&&t.type==="vtt"||(s=e.cues)!=null&&s.length))for(const i of t.cues)e.addCue(i)}E(t){for(const e of this.va){const s=e[j._];if(!s)continue;if(!this.Uf){s.track.mode=s.managed?"hidden":"disabled";continue}const i=s.track.mode==="showing";i&&this.Vf(e,s.track),e.setMode(i?"showing":"disabled",t)}}}class Ea{constructor(t){this.a=t,this.m=null,this.bd=[],this.Wf=!1,this.wa=null,this.jb=null;const e=t.textTracks;this.Wd=e,c(this.Xd.bind(this)),P(this.ei.bind(this)),m(e,"add",this.Yd.bind(this)),m(e,"remove",this.fi.bind(this)),m(e,"mode-change",this.Ha.bind(this))}Xd(){const{nativeControls:t}=this.a.$state;this.Wf=t(),this.Ha()}add(t){this.bd.push(t),Ut(this.Ha.bind(this))}remove(t){t.detach(),this.bd.splice(this.bd.indexOf(t),1),Ut(this.Ha.bind(this))}Xf(t){requestAnimationFrame(()=>{if(this.m=t,t){this.wa=new Aa,this.wa.attach(t);for(const e of this.Wd)this.Yf(e)}this.Ha()})}Yf(t){var e;V(t)&&((e=this.wa)==null||e.addTrack(t))}gi(t){var e;V(t)&&((e=this.wa)==null||e.removeTrack(t))}Yd(t){this.Yf(t.detail)}fi(t){this.gi(t.detail)}Ha(){var s,i,a,n,r,o,d;const t=this.Wd.selected;if(this.m&&(this.Wf||t!=null&&t[j.Mf])){(s=this.jb)==null||s.changeTrack(null),(i=this.wa)==null||i.setDisplay(!0),(a=this.wa)==null||a.changeTrack(t);return}if((n=this.wa)==null||n.setDisplay(!1),(r=this.wa)==null||r.changeTrack(null),!t){(o=this.jb)==null||o.changeTrack(null);return}const e=this.bd.sort((l,p)=>l.priority-p.priority).find(l=>l.canRender(t,this.m));this.jb!==e&&((d=this.jb)==null||d.detach(),e==null||e.attach(this.m),this.jb=e??null),e==null||e.changeTrack(t)}ei(){var t,e;(t=this.wa)==null||t.detach(),this.wa=null,(e=this.jb)==null||e.detach(),this.jb=null}}var He=Ca;function Ca(h,t,e){var s=null,i=null,a=function(){s&&(clearTimeout(s),i=null,s=null)},n=function(){var o=i;a(),o&&o()},r=function(){if(!t)return h.apply(this,arguments);var o=this,d=arguments,l=e&&!s;if(a(),i=function(){h.apply(o,d)},s=setTimeout(function(){if(s=null,!l){var p=i;return i=null,p()}},t),l)return i()};return r.cancel=a,r.flush=n,r}class qa extends Ci{constructor(){super(),this.Z=!1,this.kb={},this.lb=null,this.mb=null,this.bg=He(async()=>{var s;if(!this.Z)return;!this.mb&&this.lb&&(this.mb=await this.lb.getLang());const t=await((s=this.lb)==null?void 0:s.getCaptions()),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const i of e){const a=this.getByKind(i);if(a.find(l=>l.mode==="showing"))continue;const n=this.mb?a.find(l=>l.language===this.mb):null,r=N(i)?this.kb[i.find(l=>this.kb[l])||""]:this.kb[i],o=n??r,d=o&&V(o);o&&(!d||t!==!1)&&(o.mode="showing",d&&this.cg(o))}},300),this.Zd=null,this.ag=this.hi.bind(this)}get selected(){return this.A.find(e=>e.mode==="showing"&&V(e))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.mb}set preferredLang(t){this.mb=t,this.$f(t)}add(t,e){const s=t instanceof Ft,i=s?t:new Ft(t),a=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.kb[a]&&t.default&&delete t.default,i.addEventListener("mode-change",this.ag),this[q.da](i,e),i[j.Db]=this[j.Db],this.Z&&i[j.Z](),t.default&&(this.kb[a]=i),this.bg(),this}remove(t,e){if(this.Zd=t,!!this.A.includes(t))return t===this.kb[t.kind]&&delete this.kb[t.kind],t.mode="disabled",t[j.hb]=null,t.removeEventListener("mode-change",this.ag),this[q.cc](t,e),this.Zd=null,this}clear(t){for(const e of[...this.A])this.remove(e,t);return this}getByKind(t){const e=Array.isArray(t)?t:[t];return this.A.filter(s=>e.includes(s.kind))}[j.Z](){if(!this.Z){for(const t of this.A)t[j.Z]();this.Z=!0,this.bg()}}hi(t){const e=t.detail;if(this.lb&&V(e)&&e!==this.Zd&&this.cg(e),e.mode==="showing"){const s=V(e)?["captions","subtitles"]:[e.kind];for(const i of this.A)i.mode==="showing"&&i!=e&&s.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new R("mode-change",{detail:t.detail,trigger:t}))}cg(t){var e,s;t.mode!=="disabled"&&this.$f(t.language),(s=(e=this.lb)==null?void 0:e.setCaptions)==null||s.call(e,t.mode==="showing")}$f(t){var e,s;(s=(e=this.lb)==null?void 0:e.setLang)==null||s.call(e,this.mb=t)}setStorage(t){this.lb=t}}const yt=Symbol(0);class qi extends Ci{get selected(){return this.A.find(t=>t.selected)??null}get selectedIndex(){return this.A.findIndex(t=>t.selected)}[q.Hf](t,e){this[q.ea](t,!1,e)}[q.da](t,e){t[yt]=!1,Object.defineProperty(t,"selected",{get(){return this[yt]},set:s=>{var i;this.readonly||((i=this[q.If])==null||i.call(this),this[q.ea](t,s))}}),super[q.da](t,e)}[q.ea](t,e,s){if(e===(t==null?void 0:t[yt]))return;const i=this.selected;t&&(t[yt]=e),(e?i!==t:i===t)&&(i&&(i[yt]=!1),this.dispatchEvent(new R("change",{detail:{prev:i,current:this.selected},trigger:s})))}}class Oa extends qi{}class Da extends qi{constructor(){super(...arguments),this.cd=!1,this.switch="current"}get auto(){return this.cd||this.readonly}[q.If](){this[K.Wa](!1)}[q.Gf](t){this[K.Ia]=void 0,this[K.Wa](!1,t)}autoSelect(t){var e;this.readonly||this.cd||!this[K.Ia]||((e=this[K.Ia])==null||e.call(this,t),this[K.Wa](!0,t))}getBySrc(t){return this.A.find(e=>e.src===t)}[K.Wa](t,e){this.cd!==t&&(this.cd=t,this.dispatchEvent(new R("auto-change",{detail:t,trigger:e})))}}function Ma(h){return h instanceof HTMLAudioElement}function La(h){return h instanceof HTMLVideoElement}function Ia(h){return Ma(h)||La(h)}const ja={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Lt=new Set(["Shift","Alt","Meta","Ctrl"]),Va='button, [role="button"]',Gs='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class Ra extends ot{constructor(t){super(),this.a=t,this.Ib=null}onConnect(){c(this.ii.bind(this))}ii(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s=e()==="player"?this.el:document,i=w(!1);s===this.el?(this.listen("focusin",()=>i.set(!0)),this.listen("focusout",a=>{this.el.contains(a.target)||i.set(!1)})):(u(i)||i.set(document.querySelector("[data-media-player]")===this.el),m(document,"focusin",a=>{const n=a.composedPath().find(r=>r instanceof Element&&r.localName==="media-player");n!==void 0&&i.set(this.el===n)})),c(()=>{i()&&(m(s,"keyup",this.hc.bind(this)),m(s,"keydown",this.ic.bind(this)),m(s,"keydown",this.ji.bind(this),{capture:!0}))})}hc(t){var a,n;const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e!=null&&e.matches(Gs))return;let{method:s,value:i}=this._d(t);if(!S(i)&&!N(i)){(a=i==null?void 0:i.onKeyUp)==null||a.call(i,{event:t,player:this.a.player,remote:this.a.remote}),(n=i==null?void 0:i.callback)==null||n.call(i,t,this.a.remote);return}if(s!=null&&s.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.Ib?(this.dg(t,s==="seekForward"),this.Ib=null):(this.a.remote.seek(this.dd,t),this.dd=void 0)),s!=null&&s.startsWith("volume")){const r=this.el.querySelector("[data-media-volume-slider]");r==null||r.dispatchEvent(new KeyboardEvent("keyup",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}ic(t){var n,r,o,d;if(!t.key||Lt.has(t.key))return;const e=document.activeElement;if(e!=null&&e.matches(Gs)||ta(t)&&(e!=null&&e.matches(Va)))return;let{method:s,value:i}=this._d(t),a=!t.metaKey&&/^[0-9]$/.test(t.key);if(!S(i)&&!N(i)&&!a){(n=i==null?void 0:i.onKeyDown)==null||n.call(i,{event:t,player:this.a.player,remote:this.a.remote}),(r=i==null?void 0:i.callback)==null||r.call(i,t,this.a.remote);return}if(!s&&a){t.preventDefault(),t.stopPropagation(),this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.Ja(t,s,s==="seekForward");break;case"volumeUp":case"volumeDown":const l=this.el.querySelector("[data-media-volume-slider]");if(l)l.dispatchEvent(new KeyboardEvent("keydown",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const f=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+(s==="volumeUp"?+f:-f),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const p=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,p+(s==="speedUp"?.25:-.25))),t);break;default:(d=(o=this.a.remote)[s])==null||d.call(o,t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}ji(t){Ia(t.target)&&this._d(t).method&&t.preventDefault()}_d(t){const e={...this.$props.keyShortcuts(),...this.a.ariaKeys},s=Object.keys(e).find(i=>{var o;const a=e[i],n=N(a)?a.join(" "):S(a)?a:a==null?void 0:a.keys,r=(o=N(n)?n:n==null?void 0:n.split(" "))==null?void 0:o.map(d=>Fa(d).replace(/Control/g,"Ctrl").split("+"));return r==null?void 0:r.some(d=>{const l=new Set(d.filter(p=>Lt.has(p)));for(const p of Lt){const f=p.toLowerCase()+"Key";if(!l.has(p)&&t[f])return!1}return d.every(p=>Lt.has(p)?t[p.toLowerCase()+"Key"]:t.key===p.replace("Space"," "))})});return{method:s,value:s?e[s]:null}}ki(t,e){const s=t.shiftKey?10:5;return this.dd=Math.max(0,Math.min((this.dd??this.$state.currentTime())+(e==="seekForward"?+s:-s),this.$state.duration()))}dg(t,e){var s;(s=this.Ib)==null||s.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}Ja(t,e,s){this.$state.canSeek()&&(this.Ib||(this.Ib=this.el.querySelector("[data-media-time-slider]")),this.Ib?this.dg(t,s):this.a.remote.seeking(this.ki(t,e),t))}}const _a=["!","@","#","$","%","^","&","*","(",")"];function Fa(h){return h.replace(/Shift\+(\d)/g,(t,e)=>_a[e-1])}class Ha extends G{constructor(t){super(),this.$d=t}onAttach(t){const{$props:e,ariaKeys:s}=T(),i=t.getAttribute("aria-keyshortcuts");if(i){s[this.$d]=i,P(()=>{delete s[this.$d]});return}const a=e.keyShortcuts()[this.$d];if(a){const n=N(a)?a.join(" "):S(a)?a:a==null?void 0:a.keys;t.setAttribute("aria-keyshortcuts",N(n)?n.join(" "):n)}}}class Na{constructor(){this.name="audio"}canPlay(t){return ba(t)?!S(t.src)||t.type==="?"||ga(this.target,t.type):!1}mediaType(){return"audio"}async load(t){return new(await U(()=>import("./vidstack-audio-teIaHloW.js"),__vite__mapDeps([0,1,2,3,4]))).AudioProvider(this.target,t)}}class Ne{constructor(){this.name="video"}canPlay(t){return ea(t)?!S(t.src)||t.type==="?"||sa(this.target,t.type):!1}mediaType(){return"video"}async load(t){return new(await U(()=>import("./vidstack-video-FA42qs_1.js"),__vite__mapDeps([5,1,2,3,4]))).VideoProvider(this.target,t)}}const Yt=class Yt extends Ne{constructor(){super(...arguments),this.name="dash"}canPlay(t){return Yt.supported&&Ie(t)}async load(t){return new(await U(()=>import("./vidstack-dash-84xYYbQv.js"),__vite__mapDeps([6,1,2,5,3,4]))).DASHProvider(this.target,t)}};Yt.supported=Ui();let ve=Yt;const zt=class zt extends Ne{constructor(){super(...arguments),this.name="hls"}canPlay(t){return zt.supported&&je(t)}async load(t){return new(await U(()=>import("./vidstack-hls-1C8sHImq.js"),__vite__mapDeps([7,1,2,5,3,4]))).HLSProvider(this.target,t)}};zt.supported=vi();let Pe=zt;class Ua{constructor(){this.name="vimeo"}preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)qt(e)}canPlay(t){return S(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){return new(await U(()=>import("./vidstack-vimeo-JIR8dgEu.js"),__vite__mapDeps([8,1,2,4,9,10]))).VimeoProvider(this.target,t)}async loadPoster(t,e,s){const{resolveVimeoVideoId:i,getVimeoVideoInfo:a}=await U(()=>import("./vidstack-BInq9zTH-fGAq8GWc.js"),__vite__mapDeps([]));if(!S(t.src))return null;const{videoId:n,hash:r}=i(t.src);return n?a(n,s,r).then(o=>o?o.poster:null):null}}class Ga{constructor(){this.name="youtube"}preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)qt(e)}canPlay(t){return S(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){return new(await U(()=>import("./vidstack-youtube-Lb7P_pCv.js"),__vite__mapDeps([11,1,2,9,12]))).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){const{findYouTubePoster:i,resolveYouTubeVideoId:a}=await U(()=>import("./vidstack-DscYSLiW-_wDIXJ0I.js"),__vite__mapDeps([])),n=S(t.src)&&a(t.src);return n?i(n,s):null}}const ge=Symbol(0),Ka=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],Wa={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:ja,storage:null};class Ks extends ot{constructor(t,e){super(),this.la=t,this.La=e}async onAttach(t){const e=this.$props[this.la]();if(e==="eager")requestAnimationFrame(this.La);else if(e==="idle")ia(this.La);else if(e==="visible"){let s,i=new IntersectionObserver(a=>{this.scope&&a[0].isIntersecting&&(s==null||s(),s=void 0,this.La())});i.observe(t),s=P(()=>i.disconnect())}}}class Qa{constructor(t,e){this.V=t,this.a=e,this.c=(s,...i)=>{this.V(new R(s,{detail:i==null?void 0:i[0],trigger:i==null?void 0:i[1]}))}}async Ga(t,e){return Ut(async()=>{var qs,Os,Ds,Dt,Ms,Ls,Is;this.a;const{autoPlay:s,canPlay:i,started:a,duration:n,seekable:r,buffered:o,remotePlaybackInfo:d,playsInline:l,savedState:p,source:f}=this.a.$state;if(i())return;const b={duration:(t==null?void 0:t.duration)??n(),seekable:(t==null?void 0:t.seekable)??r(),buffered:(t==null?void 0:t.buffered)??o(),provider:this.a.$provider()};this.c("can-play",b,e),Z();let g=this.a.$provider(),{storage:v,qualities:Y}=this.a,{muted:dt,volume:Vi,clipStartTime:Ri,playbackRate:_i}=this.a.$props;await((qs=v==null?void 0:v.onLoad)==null?void 0:qs.call(v,f()));const Fi=(Os=p())==null?void 0:Os.currentTime,Es=(Ds=p())==null?void 0:Ds.paused,ue=await(v==null?void 0:v.getTime()),Cs=Fi??ue??Ri(),Hi=Es||Es!==!1&&!a()&&s();if(g){g.setVolume(await(v==null?void 0:v.getVolume())??Vi()),g.setMuted(dt()||!!await(v==null?void 0:v.getMuted()));const ut=await(v==null?void 0:v.getAudioGain())??1;ut>1&&((Ms=(Dt=g.audioGain)==null?void 0:Dt.setGain)==null||Ms.call(Dt,ut)),(Ls=g.setPlaybackRate)==null||Ls.call(g,await(v==null?void 0:v.getPlaybackRate())??_i()),(Is=g.setPlaysInline)==null||Is.call(g,l()),Cs>0&&g.setCurrentTime(Cs)}const gt=await(v==null?void 0:v.getVideoQuality());if(gt&&Y.length){let ut=null,js=1/0;for(const Mt of Y){const Vs=Math.abs(gt.width-Mt.width)+Math.abs(gt.height-Mt.height)+(gt.bitrate?Math.abs(gt.bitrate-(Mt.bitrate??0)):0);Vs<js&&(ut=Mt,js=Vs)}ut&&(ut.selected=!0)}i()&&Hi?await this.kj(e):ue&&ue>0&&this.c("started",void 0,e),d.set(null)})}async kj(t){const{player:e,$state:{autoPlaying:s,muted:i}}=this.a;s.set(!0);const a=new R("auto-play-attempt",{trigger:t});try{await e.play(a)}catch{}}}class Xa{constructor(){this.i=new Map}k(t,e){this.i.set(t,e)}xe(t){const e=this.rg(t);return this.i.delete(t),e}rg(t){return this.i.get(t)}ub(t){this.i.delete(t)}Pm(){this.i.clear()}}class Oi{constructor(){this.wc=!1,this.ye=Fs(),this.i=new Map}get Qm(){return this.i.size}get Rm(){return this.wc}async Sm(){this.wc||await this.ye.promise}k(t,e){if(this.wc){e();return}this.i.delete(t),this.i.set(t,e)}xe(t){var e;(e=this.i.get(t))==null||e(),this.i.delete(t)}Xa(){this.sg(),this.wc=!0,this.i.size>0&&this.sg()}$(){this.wc=!1}z(){this.$(),this.i.clear(),this.tg()}sg(){for(const t of this.i.keys())this.xe(t);this.tg()}tg(){this.ye.resolve(),this.ye=Fs()}}class Ya extends ot{constructor(t,e,s){super(),this.Ba=t,this.g=e,this.a=s,this.zc=new Oi,this.Fe=!1,this.C=s.$provider,this.yc=new Pa,this.pd=new Ta,this.bb=new Gt}onAttach(){this.listen("fullscreen-change",this.Qd.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.Hj.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);this.Ij(),c(this.Jj.bind(this)),c(this.Kj.bind(this)),c(this.Lj.bind(this)),c(this.Mj.bind(this)),c(this.Nj.bind(this)),c(this.Oj.bind(this)),c(this.Pj.bind(this))}onDestroy(){try{const t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:s}=this.$state;s()&&this.Lg("prefer-media",t),e()&&this.Ge(t)}catch{}this.zc.z()}Ij(){const{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;const s=this.listen("media-play-request",i=>{this.Gg(i),s()})}Jj(){const t=this.C(),e=this.$state.canPlay();return t&&e&&this.zc.Xa(),()=>{this.zc.$()}}Hj(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(u(this.C)?this[t.type](t):this.zc.k(t.type,()=>{u(this.C)&&this[t.type](t)}))}async Ac(t){const{canPlay:e,paused:s,autoPlaying:i}=this.$state;if(this.Gg(t)||!u(s))return;t&&this.g.i.k("media-play-request",t);const a=u(i);try{const n=u(this.C);return ye(n,u(e)),await n.play()}catch(n){const r=this.createEvent("play-fail",{detail:me(n),trigger:t});throw r.autoPlay=a,this.Ba.V(r),n}}Gg(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if(e()==="play"&&!s()){const i=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(i),this.zc.k("media-play-request",async()=>{try{await this.Ac(i)}catch{}}),!0}return!1}async Ee(t){const{canPlay:e,paused:s}=this.$state;if(!u(s)){t&&this.g.i.k("media-pause-request",t);try{const i=u(this.C);return ye(i,u(e)),await i.pause()}catch(i){throw this.g.i.ub("media-pause-request"),i}}}Hg(t,e){const{audioGain:s,canSetAudioGain:i}=this.$state;if(s()===t)return;const a=this.C();if(!(a!=null&&a.audioGain)||!i())throw Error("[vidstack] audio gain api not available");e&&this.g.i.k("media-audio-gain-change-request",e),a.audioGain.setGain(t)}Ig(t){const{canPlay:e,live:s,liveEdge:i,canSeek:a,liveSyncPosition:n,seekableEnd:r,userBehindLiveEdge:o}=this.$state;if(o.set(!1),u(()=>!s()||i()||!a()))return;const d=u(this.C);ye(d,u(e)),t&&this.g.i.k("media-seek-request",t);const l=r()-2;d.setCurrentTime(Math.min(l,n()??l))}async Jg(t="prefer-media",e){const s=this.Kg(t);if(Ws(t,s),!s.active)return u(this.$state.pictureInPicture)&&(this.Fe=!0,await this.Ge(e)),e&&this.g.i.k("media-enter-fullscreen-request",e),s.enter()}async Lg(t="prefer-media",e){const s=this.Kg(t);if(Ws(t,s),!!s.active){e&&this.g.i.k("media-exit-fullscreen-request",e);try{const i=await s.exit();return this.Fe&&u(this.$state.canPictureInPicture)&&await this.He(),i}finally{this.Fe=!1}}}Kg(t){const e=u(this.C);return t==="prefer-media"&&this.pd.supported||t==="media"?this.pd:e==null?void 0:e.fullscreen}async He(t){if(this.Mg(),!this.$state.pictureInPicture())return t&&this.g.i.k("media-enter-pip-request",t),await this.C().pictureInPicture.enter()}async Ge(t){if(this.Mg(),!!this.$state.pictureInPicture())return t&&this.g.i.k("media-exit-pip-request",t),await this.C().pictureInPicture.exit()}Mg(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}Kj(){this.yc.defaultDelay=this.$props.controlsDelay()}Lj(){var s,i;const{canSetAudioGain:t}=this.$state,e=!!((i=(s=this.C())==null?void 0:s.audioGain)!=null&&i.supported);t.set(e)}Mj(){var s,i;const{canAirPlay:t}=this.$state,e=!!((i=(s=this.C())==null?void 0:s.airPlay)!=null&&i.supported);t.set(e)}Nj(){const{canGoogleCast:t,source:e}=this.$state,s=aa&&!na&&ra(e());t.set(s)}Oj(){var s,i;const{canFullscreen:t}=this.$state,e=this.pd.supported||!!((i=(s=this.C())==null?void 0:s.fullscreen)!=null&&i.supported);t.set(e)}Pj(){var s,i;const{canPictureInPicture:t}=this.$state,e=!!((i=(s=this.C())==null?void 0:s.pictureInPicture)!=null&&i.supported);t.set(e)}async"media-airplay-request"(t){try{await this.Ng(t)}catch{}}async Ng(t){var e;try{const s=(e=this.C())==null?void 0:e.airPlay;if(!(s!=null&&s.supported))throw Error("No AirPlay adapter.");return t&&this.g.i.k("media-airplay-request",t),await s.prompt()}catch(s){throw this.g.i.ub("media-airplay-request"),s}}async"media-google-cast-request"(t){try{await this.Og(t)}catch{}}async Og(t){try{const{canGoogleCast:e}=this.$state;if(!u(e)){const i=Error("Cast not available.");throw i.code="CAST_NOT_AVAILABLE",i}if(qt("https://www.gstatic.com"),!this.qd){const i=await U(()=>import("./vidstack-g0pCq79a-_ZMTWLEr.js").then(a=>a.v),__vite__mapDeps([13,2,1]));this.qd=new i.GoogleCastLoader}await this.qd.prompt(this.a),t&&this.g.i.k("media-google-cast-request",t);const s=u(this.$state.remotePlaybackState)!=="disconnected";s&&this.$state.savedState.set({paused:u(this.$state.paused),currentTime:u(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(s?this.qd:null)}catch(e){throw this.g.i.ub("media-google-cast-request"),e}}"media-audio-track-change-request"(t){const{logger:e,audioTracks:s}=this.a;if(s.readonly)return;const i=t.detail,a=s[i];if(a){const n=t.type;this.g.i.k(n,t),a.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this.Jg(t.detail,t)}catch(e){this.Zc(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.Lg(t.detail,t)}catch(e){this.Zc(e,t)}}async Qd(t){const e=u(this.$props.fullscreenOrientation),s=t.detail;if(!(ha(e)||e==="none"||!this.bb.supported))if(s){if(this.bb.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.bb.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}Zc(t,e){this.Ba.V(this.createEvent("fullscreen-error",{detail:me(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.g.i.k(e,t),await this.bb.lock(t.detail)}catch{this.g.i.ub(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.g.i.k(e,t),await this.bb.unlock()}catch{this.g.i.ub(e)}}async"media-enter-pip-request"(t){try{await this.He(t)}catch(e){this.Pg(e,t)}}async"media-exit-pip-request"(t){try{await this.Ge(t)}catch(e){this.Pg(e,t)}}Pg(t,e){this.Ba.V(this.createEvent("picture-in-picture-error",{detail:me(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(!(!e()||s()||!i())){this.g.i.k("media-seek-request",t);try{this.Ig()}catch{this.g.i.ub("media-seek-request")}}}async"media-loop-request"(t){try{this.g.Ob=!0,this.g.Bc=!0,await this.Ac(t)}catch{this.g.Ob=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.Ee(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.Ac(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.C();i!=null&&i.setPlaybackRate&&(this.g.i.k("media-rate-change-request",t),i.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.Hg(t.detail,t)}catch{}}"media-quality-change-request"(t){var n,r;const{qualities:e,storage:s,logger:i}=this.a;if(e.readonly)return;this.g.i.k("media-quality-change-request",t);const a=t.detail;if(a<0)e.autoSelect(t),t.isOriginTrusted&&((n=s==null?void 0:s.setVideoQuality)==null||n.call(s,null));else{const o=e[a];o&&(o.selected=!0,t.isOriginTrusted&&((r=s==null?void 0:s.setVideoQuality)==null||r.call(s,{id:o.id,width:o.width,height:o.height,bitrate:o.bitrate})))}}"media-pause-controls-request"(t){const e=t.type;this.g.i.k(e,t),this.yc.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.g.i.k(e,t),this.yc.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:a,live:n,userBehindLiveEdge:r,clipStartTime:o}=this.$state,d=t.detail;i()&&(this.g.Bc=!0);const l=t.type;this.g.Ja=!1,this.g.i.ub(l);const p=d+o(),f=Math.floor(p)===Math.floor(s()),b=f?s():Math.min(Math.max(e()+.1,p),s()-.1);!Number.isFinite(b)||!a()||(this.g.i.k(l,t),this.C().setCurrentTime(b),n()&&t.isOriginTrusted&&Math.abs(s()-b)>=2&&r.set(!0))}"media-seeking-request"(t){const e=t.type;this.g.i.k(e,t),this.$state.seeking.set(!0),this.g.Ja=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.g.i.k(e,t),this.Ba.V(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.g.i.k(e,t),this.Ba.V(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.a.textTracks[e];if(i){const a=t.type;this.g.i.k(a,t),i.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.g.i.k(e,t),this.C().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const i=t.type;this.g.i.k(i,t),this.a.$provider().setMuted(!1),s()===0&&(this.g.i.k(i,t),this.C().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;if(s()===i)return;const a=t.type;this.g.i.k(a,t),this.C().setVolume(i),i>0&&e()&&(this.g.i.k(a,t),this.C().setMuted(!1))}Qa(t,e,s){}}function ye(h,t){if(!(h&&t))throw Error("[vidstack] media not ready")}function Ws(h,t){if(!(t!=null&&t.supported))throw Error("[vidstack] no fullscreen support")}class za{constructor(){this.Ja=!1,this.Ob=!1,this.Bc=!1,this.i=new Xa}}const Ba=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class Ja extends ot{constructor(t,e){super(),this.g=t,this.a=e,this.u=new Map,this.rd=!1,this.sd=!1,this.Cc=!1,this.Ke=null,this.seeking=ct(s=>{const{seeking:i,realCurrentTime:a,paused:n}=this.$state;i.set(!0),a.set(s.detail),this.D("media-seeking-request",s),n()&&(this.Pb=s,this.Le())},150,{leading:!0}),this.Le=He(()=>{if(!this.Pb)return;this.sd=!0;const{waiting:s,playing:i}=this.$state;s.set(!0),i.set(!1);const a=this.createEvent("waiting",{trigger:this.Pb});this.u.set("waiting",a),this.dispatch(a),this.Pb=void 0,this.sd=!1},300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){c(this.Qj.bind(this)),this.Rj(),this.Sj(),this.Tj(),this.Uj(),P(this.Vj.bind(this))}onDestroy(){const{audioTracks:t,qualities:e,textTracks:s}=this.a;t[q.z](),e[q.z](),s[q.z](),this.Ie()}V(t){if(!this.scope)return;const e=t.type;Ut(()=>{var s;return(s=this[t.type])==null?void 0:s.call(this,t)}),Ba.has(e)&&this.u.set(e,t),this.dispatch(t)}Uj(){this.Cc&&(requestAnimationFrame(()=>{this.scope&&this.a.remote.play(new R("dom-connect"))}),this.Cc=!1)}Vj(){var t;this.Cc||(this.Cc=!this.$state.paused(),(t=this.a.$provider())==null||t.pause())}vb(){this.Qg(),this.rd=!1,this.g.Bc=!1,this.g.Ob=!1,this.sd=!1,this.Pb=void 0,this.u.clear()}D(t,e){const s=this.g.i.xe(t);s&&(e.request=s,e.triggers.add(s))}Rj(){this.Je(),this.Rg();const t=this.a.textTracks;m(t,"add",this.Je.bind(this)),m(t,"remove",this.Je.bind(this)),m(t,"mode-change",this.Rg.bind(this))}Sj(){const t=this.a.qualities;m(t,"add",this.ld.bind(this)),m(t,"remove",this.ld.bind(this)),m(t,"change",this.Za.bind(this)),m(t,"auto-change",this.Wj.bind(this)),m(t,"readonly-change",this.Xj.bind(this))}Tj(){const t=this.a.audioTracks;m(t,"add",this.Sg.bind(this)),m(t,"remove",this.Sg.bind(this)),m(t,"change",this.Yj.bind(this))}Je(t){const{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}Rg(t){t&&this.D("media-text-track-change-request",t);const e=this.a.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}Sg(t){const{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Yj(t){const{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),t&&this.D("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}ld(t){const{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}Za(t){const{quality:e}=this.$state;e.set(this.a.qualities.selected),t&&this.D("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}Wj(){const{qualities:t}=this.a,e=t.auto;this.$state.autoQuality.set(e),e||this.Ie()}Tg(){this.Ie(),this.Ke=c(()=>{const{qualities:t}=this.a,{mediaWidth:e,mediaHeight:s}=this.$state,i=e(),a=s();if(i===0||a===0)return;let n=null,r=1/0;for(const o of t){const d=Math.abs(o.width-i)+Math.abs(o.height-a);d<r&&(r=d,n=o)}n&&t[q.ea](n,!0,new R("resize",{detail:{width:i,height:a}}))})}Ie(){var t;(t=this.Ke)==null||t.call(this),this.Ke=null}Xj(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}Qj(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}oa().then(t.set)}"provider-change"(t){var i,a;const e=this.a.$provider(),s=t.detail;(e==null?void 0:e.type)!==(s==null?void 0:s.type)&&((i=e==null?void 0:e.destroy)==null||i.call(e),(a=e==null?void 0:e.scope)==null||a.dispose(),this.a.$provider.set(t.detail),e&&t.detail===null&&this.Ug(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.vb()}"can-load"(t){this.$state.canLoad.set(!0),this.u.set("can-load",t),this.a.textTracks[j.Z](),this.D("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.u.set("can-load-poster",t),this.D("media-poster-start-loading",t)}"media-type-change"(t){const e=this.u.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),a=i==="unknown"?t.detail:i;s!==a&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:a,trigger:t}))})},0)}"stream-type-change"(t){const e=this.u.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){var i;const{storage:e}=this.a,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.D("media-rate-change-request",t),s()&&((i=e==null?void 0:e.setPlaybackRate)==null||i.call(e,t.detail))}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:i,state:a}=t.detail,n=a==="connected";s.set(i),e.set(a);const r=i==="airplay"?"media-airplay-request":"media-google-cast-request";if(n)this.D(r,t);else{const o=this.g.i.rg(r);o&&(t.request=o,t.triggers.add(o))}}"sources-change"(t){const e=this.$state.sources(),s=t.detail;this.$state.sources.set(s),this.Zj(e,s,t)}Zj(t,e,s){let{qualities:i}=this.a,a=!1,n=!1;for(const r of t){if(!Te(r))continue;if(!e.some(d=>d.src===r.src)){const d=i.getBySrc(r.src);d&&(i[q.cc](d,s),n=!0)}}n&&!i.length&&(this.$state.savedState.set(null),i[q.z](s));for(const r of e){if(!Te(r)||i.getBySrc(r.src))continue;const o={id:r.id??r.height+"p",bitrate:null,codec:null,...r,selected:!1};i[q.da](o,s),a=!0}a&&!i[K.Ia]&&(this.Tg(),i[K.Ia]=this.Tg.bind(this),i[K.Wa](!0,s))}"source-change"(t){var s,i;t.isQualityChange=((s=t.originEvent)==null?void 0:s.type)==="quality-change";const e=t.detail;this.Ug(t,t.isQualityChange),this.u.set(t.type,t),this.$state.source.set(e),(i=this.el)==null||i.setAttribute("aria-busy","true")}Ug(t,e=!1){const{audioTracks:s,qualities:i}=this.a;if(!e){s[q.z](t),i[q.z](t),Hs(this.$state,e),this.vb();return}Hs(this.$state,e),this.vb()}abort(t){const e=this.u.get("source-change");e&&t.triggers.add(e);const s=this.u.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.u.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.u.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.u.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.u.get("load-start");e&&t.triggers.add(e)}"can-play"(t){var s;const e=this.u.get("loaded-metadata");e&&t.triggers.add(e),this.Vg(t.detail),(s=this.el)==null||s.setAttribute("aria-busy","false")}"can-play-through"(t){this.Vg(t.detail);const e=this.u.get("can-play");e&&t.triggers.add(e)}Vg(t){const{seekable:e,buffered:s,intrinsicDuration:i,canPlay:a}=this.$state;a.set(!0),s.set(t.buffered),e.set(t.seekable);const n=fe(t.seekable)??1/0;i.set(n)}"duration-change"(t){const{live:e,intrinsicDuration:s,ended:i}=this.$state,a=t.detail;if(!e()){const n=Number.isNaN(a)?0:a;s.set(n),i()&&this.Wg(t)}}progress(t){const{buffered:e,bufferedEnd:s,seekable:i,seekableEnd:a,live:n,intrinsicDuration:r}=this.$state,{buffered:o,seekable:d}=t.detail,l=fe(o)??1/0,p=o.length!==e().length,f=l>s(),b=fe(d)??1/0,g=d.length!==i().length,v=b>a();(p||f)&&e.set(o),(g||v)&&i.set(d),n()&&(r.set(b),this.dispatch("duration-change",{detail:b,trigger:t}))}play(t){const{paused:e,autoPlayError:s,ended:i,autoPlaying:a,playsInline:n,pointer:r,muted:o,viewType:d,live:l,userBehindLiveEdge:p}=this.$state;if(this._j(),!e()){t.stopImmediatePropagation();return}t.autoPlay=a();const f=this.u.get("waiting");f&&t.triggers.add(f),this.D("media-play-request",t),this.u.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.V(this.createEvent("auto-play",{detail:{muted:o()},trigger:t})),a.set(!1)),(i()||this.g.Bc)&&(this.g.Bc=!1,i.set(!1),this.V(this.createEvent("replay",{trigger:t}))),!n()&&d()==="video"&&r()==="coarse"&&this.a.remote.enterFullscreen("prefer-media",t),l()&&!p()&&this.a.remote.seekToLiveEdge(t)}_j(t){if(!u(this.a.$provider))return;const{ended:s,seekableStart:i,clipStartTime:a,clipEndTime:n,realCurrentTime:r,duration:o}=this.$state,d=r()<a()||n()>0&&r()>=n()||Math.abs(r()-o())<.1||s();return d&&this.dispatch("media-seek-request",{detail:(a()>0?0:i())+.1,trigger:t}),d}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,i=this.u.get("play");i&&t.triggers.add(i),this.D("media-play-request",t);const{paused:a,playing:n}=this.$state;a.set(!0),n.set(!1),this.vb(),this.u.set("play-fail",t),t.autoPlay&&(this.V(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.u.get("play"),s=this.u.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout(()=>this.vb(),0);const{paused:i,playing:a,live:n,liveSyncPosition:r,seekableEnd:o,started:d,currentTime:l,seeking:p,ended:f}=this.$state;if(i.set(!1),a.set(!0),p.set(!1),f.set(!1),this.g.Ob){this.g.Ob=!1;return}if(n()&&!d()&&l()===0){const b=r()??o()-2;Number.isFinite(b)&&this.a.$provider().setCurrentTime(b)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.V(this.createEvent("started",{trigger:t})))}pause(t){var a;(a=this.el)!=null&&a.isConnected||(this.Cc=!0),this.D("media-pause-request",t);const e=this.u.get("seeked");e&&t.triggers.add(e);const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1),this.rd&&setTimeout(()=>{this.V(this.createEvent("end",{trigger:t})),this.rd=!1},0),this.vb()}"time-update"(t){if(this.g.Ob){t.stopImmediatePropagation();return}const{realCurrentTime:e,played:s,waiting:i,clipEndTime:a}=this.$state,n=a(),r=t.detail;e.set(r.currentTime),s.set(r.played),i.set(!1);for(const o of this.a.textTracks)o[j.Eb](r.currentTime,t);n>0&&r.currentTime>=n&&(this.rd=!0,this.dispatch("media-pause-request",{trigger:t})),this.$j()}Wg(t){const{duration:e,played:s}=this.$state,i=ca(s())??0;this.V(this.createEvent("time-update",{detail:{currentTime:e(),played:new la(i,e())},trigger:t}))}$j(){var i;const{storage:t}=this.a,{canPlay:e,realCurrentTime:s}=this.$state;e()&&((i=t==null?void 0:t.setTime)==null||i.call(t,s()))}"audio-gain-change"(t){var a;const{storage:e}=this.a,{canPlay:s,audioGain:i}=this.$state;i.set(t.detail),this.D("media-audio-gain-change-request",t),s()&&((a=e==null?void 0:e.setAudioGain)==null||a.call(e,i()))}"volume-change"(t){var r,o;const{storage:e}=this.a,{volume:s,muted:i,canPlay:a}=this.$state,n=t.detail;s.set(n.volume),i.set(n.muted||n.volume===0),this.D("media-volume-change-request",t),this.D(n.muted?"media-mute-request":"media-unmute-request",t),a()&&((r=e==null?void 0:e.setVolume)==null||r.call(e,s()),(o=e==null?void 0:e.setMuted)==null||o.call(e,i()))}seeked(t){const{seeking:e,currentTime:s,realCurrentTime:i,paused:a,seekableEnd:n,ended:r}=this.$state;if(this.g.Ja)e.set(!0),t.stopImmediatePropagation();else if(e()){const o=this.u.get("waiting");o&&t.triggers.add(o);const d=this.u.get("seeking");d&&!t.triggers.has(d)&&t.triggers.add(d),a()&&this.Qg(),e.set(!1),i.set(t.detail),this.D("media-seek-request",t);const l=t==null?void 0:t.originEvent;l!=null&&l.isTrusted&&!/seek/.test(l.type)&&this.started(t)}Math.floor(s())!==Math.floor(n())?r.set(!1):this.end(t)}waiting(t){this.sd||this.g.Ja||(t.stopImmediatePropagation(),this.Pb=t,this.Le())}end(t){const{loop:e,ended:s}=this.$state;if(!(!e()&&s())){if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>this.lc(t),0)}}lc(t){var r;const{storage:e}=this.a,{paused:s,seeking:i,ended:a,duration:n}=this.$state;this.Wg(t),s()||this.dispatch("pause",{trigger:t}),i()&&this.dispatch("seeked",{detail:n(),trigger:t}),a.set(!0),this.vb(),(r=e==null?void 0:e.setTime)==null||r.call(e,n(),!0),this.dispatch("ended",{trigger:t})}Qg(){this.Le.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.D(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.D("media-enter-fullscreen-request",t),this.D("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.D(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.D(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.D("media-enter-pip-request",t),this.D("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class Za extends ot{onSetup(){this.Hb(),c(this.bk.bind(this)),c(this.ck.bind(this)),c(this.dk.bind(this)),c(this.Xd.bind(this)),c(this.Ca.bind(this)),c(this.ek.bind(this)),c(this.fk.bind(this)),c(this.gk.bind(this)),c(this.hk.bind(this)),c(this.ik.bind(this)),c(this.Me.bind(this)),c(this.jk.bind(this)),c(this.kk.bind(this)),c(this.td.bind(this))}Hb(){var s;const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const i of Object.keys(this.$props))e.has(i)||(s=this.$state[t[i]??i])==null||s.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}kk(){const{viewType:t,streamType:e,title:s,poster:i,loop:a}=this.$props,n=this.$state;n.providedPoster.set(i()),n.providedStreamType.set(e()),n.providedViewType.set(t()),n.providedTitle.set(s()),n.providedLoop.set(a())}ak(){}bk(){const{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}td(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}ck(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}ik(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})}Xd(){const t=this.$props.controls();this.$state.controls.set(t)}jk(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Ca(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)}ek(){const{providedDuration:t}=this.$state;t.set(this.$props.duration())}Me(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}dk(){const{clipStartTime:t,clipEndTime:e}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(e())}fk(){this.dispatch("live-change",{detail:this.$state.live()})}hk(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}gk(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}const kt=class kt extends ot{constructor(){super()}onConnect(){c(this.lk.bind(this)),c(this.mk.bind(this));const t=this.nk.bind(this);for(const e of kt.Xg)navigator.mediaSession.setActionHandler(e,t);P(this.Fa.bind(this))}Fa(){for(const t of kt.Xg)navigator.mediaSession.setActionHandler(t,null)}lk(){const{title:t,artist:e,artwork:s,poster:i}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:s()??[{src:i()}]})}mk(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}nk(t){const e=new R("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:W(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??10),trigger:e});break}}};kt.Xg=["play","pause","seekforward","seekbackward","seekto"];let xe=kt,Kt=w(!1);m(document,"pointerdown",()=>{Kt.set(!1)}),m(document,"keydown",h=>{h.metaKey||h.altKey||h.ctrlKey||Kt.set(!0)});class X extends G{constructor(){super(...arguments),this.Dc=w(!1)}onConnect(t){c(()=>{if(!Kt()){this.Dc.set(!1),It(t,!1),this.listen("pointerenter",this.Oe.bind(this)),this.listen("pointerleave",this.Pe.bind(this));return}const e=document.activeElement===t;this.Dc.set(e),It(t,e),this.listen("focus",this.Ec.bind(this)),this.listen("blur",this.qk.bind(this))})}focused(){return this.Dc()}Ec(){this.Dc.set(!0),It(this.el,!0)}qk(){this.Dc.set(!1),It(this.el,!1)}Oe(){Qs(this.el,!0)}Pe(){Qs(this.el,!1)}}function It(h,t){$(h,"data-focus",t),$(h,"data-hocus",t)}function Qs(h,t){$(h,"data-hocus",t),$(h,"data-hover",t)}var tn=Object.defineProperty,en=Object.getOwnPropertyDescriptor,E=(h,t,e,s)=>{for(var i=s>1?void 0:s?en(t,e):t,a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=(s?n(t,e,i):n(i))||i);return s&&i&&tn(t,e,i),i},J;const A=(J=class extends y{constructor(){super(),this.canPlayQueue=new Oi,this.Re=!1,new Za;const t={player:this,qualities:new Da,audioTracks:new Oa,storage:null,$provider:w(null),$providerSetup:w(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new va(void 0),t.remote.setPlayer(this),t.textTracks=new qa,t.textTracks[j.Db]=this.$state.crossOrigin,t.textRenderers=new Ea(t),t.ariaKeys={},this.a=t,H(Gi,t),this.orientation=new Gt,new X,new Ra(t);const e=new za;this.Ba=new Ja(e,t),this.W=new Ya(this.Ba,e,t),t.delegate=new Qa(this.Ba.V.bind(this.Ba),t),typeof navigator<"u"&&"mediaSession"in navigator&&new xe,new Ks("load",this.startLoading.bind(this)),new Ks("posterLoad",this.startLoadingPoster.bind(this))}get p(){return this.a.$provider()}get vd(){return this.$props}onSetup(){this.rk(),c(this.sk.bind(this)),c(this.tk.bind(this)),c(this.fc.bind(this)),c(this.Fc.bind(this)),c(this.Qb.bind(this)),c(this.Me.bind(this)),c(this.Qe.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),x(t,"tabindex","0"),x(t,"role","region"),c(this.uk.bind(this)),c(this.td.bind(this)),c(this.Yg.bind(this)),m(t,"find-media-player",this.vk.bind(this))}onConnect(t){Wi&&$(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.Zg(e),e.onchange=this.Zg.bind(this);const s=new ResizeObserver(mt(this.pa.bind(this)));s.observe(t),c(this.pa.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),P(()=>{s.disconnect(),e.onchange=null})}onDestroy(){this.a.player=null,this.canPlayQueue.z()}td(){const t=this.$el,{title:e,live:s,viewType:i,providedTitle:a}=this.$state,n=s(),r=Qi(i()),o=r!=="Unknown"?`${n?"Live ":""}${r}`:n?"Live":"Media",d=e();$(this.el,"aria-label",`${o} Player`+(d?` - ${d}`:"")),t!=null&&t.hasAttribute("title")&&(this.Re=!0,t==null||t.removeAttribute("title"))}Yg(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),$(this.el,"data-orientation",t),this.pa()}sk(){this.$state.canPlay()&&this.p?this.canPlayQueue.Xa():this.canPlayQueue.$()}rk(){if(J[ge]){this.setAttributes(J[ge]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const s=this.$state.textTrack();return!!s&&V(s)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:s,canPlay:i,waiting:a}=this.$state;return s()&&(!i()||a())},"data-error":function(){const{error:s}=this.$state;return!!s()},"data-autoplay-error":function(){const{autoPlayError:s}=this.$state;return!!s()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const s of Ka){const i="data-"+(e[s]??Xi(s));t[i]=function(){return this.$state[s]()}}delete t.title,J[ge]=t,this.setAttributes(t)}vk(t){t.detail(this)}pa(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),Q(this.el,"--player-width",t+"px"),Q(this.el,"--player-height",e+"px")}Zg(t){const e=t.matches?"coarse":"fine";$(this.el,"data-pointer",e),this.$state.pointer.set(e),this.pa()}get provider(){return this.p}get controls(){return this.W.yc}set controls(t){this.vd.controls.set(t)}get title(){return u(this.$state.providedTitle)}set title(t){if(this.Re){this.Re=!1;return}this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.vd.duration.set(t)}get paused(){return u(this.$state.paused)}set paused(t){this._g(t)}fc(){this._g(this.$props.paused())}_g(t){t?this.canPlayQueue.k("paused",()=>this.W.Ee()):this.canPlayQueue.k("paused",()=>this.W.Ac())}get muted(){return u(this.$state.muted)}set muted(t){this.vd.muted.set(t)}tk(){this.wk(this.$props.muted())}wk(t){this.canPlayQueue.k("muted",()=>{this.p&&this.p.setMuted(t)})}get currentTime(){return u(this.$state.currentTime)}set currentTime(t){this.$g(t)}Qb(){this.$g(this.$props.currentTime())}$g(t){this.canPlayQueue.k("currentTime",()=>{const{currentTime:e,clipStartTime:s,seekableStart:i,seekableEnd:a}=this.$state;t!==u(e)&&u(()=>{if(!this.p)return;const n=t+s(),r=Math.floor(n)===Math.floor(a()),o=r?a():Math.min(Math.max(i()+.1,n),a()-.1);Number.isFinite(o)&&this.p.setCurrentTime(o)})})}get volume(){return u(this.$state.volume)}set volume(t){this.vd.volume.set(t)}Fc(){this.xk(this.$props.volume())}xk(t){const e=Fe(0,t,1);this.canPlayQueue.k("volume",()=>{this.p&&this.p.setVolume(e)})}get playbackRate(){return u(this.$state.playbackRate)}set playbackRate(t){this.ah(t)}Qe(){this.ah(this.$props.playbackRate())}ah(t){this.canPlayQueue.k("rate",()=>{var e,s;this.p&&((s=(e=this.p).setPlaybackRate)==null||s.call(e,t))})}Me(){this.yk(this.$props.playsInline())}yk(t){this.canPlayQueue.k("playsinline",()=>{var e,s;this.p&&((s=(e=this.p).setPlaysInline)==null||s.call(e,t))})}uk(){var s;let t=this.$props.storage(),e=S(t)?new Sa:t;if(e!=null&&e.onChange){const{source:i}=this.$state,a=S(t)?t:(s=this.el)==null?void 0:s.id,n=at(this.zk.bind(this));c(()=>e.onChange(i(),n(),a||void 0))}this.a.storage=e,this.a.textTracks.setStorage(e),P(()=>{var i;(i=e==null?void 0:e.onDestroy)==null||i.call(e),this.a.storage=null,this.a.textTracks.setStorage(null)})}zk(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,i=s();return i.src?`${i.src}:${t()}:${e()}`:null}async play(t){return this.W.Ac(t)}async pause(t){return this.W.Ee(t)}async enterFullscreen(t,e){return this.W.Jg(t,e)}async exitFullscreen(t,e){return this.W.Lg(t,e)}enterPictureInPicture(t){return this.W.He(t)}exitPictureInPicture(t){return this.W.Ge(t)}seekToLiveEdge(t){this.W.Ig(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.W.Ng(t)}requestGoogleCast(t){return this.W.Og(t)}setAudioGain(t,e){return this.W.Hg(t,e)}destroy(){super.destroy(),this.a.remote.setPlayer(null),this.dispatch("destroy")}},J.props=Wa,J.state=Ki,J);E([k],A.prototype,"canPlayQueue",2);E([k],A.prototype,"remoteControl",2);E([k],A.prototype,"provider",1);E([k],A.prototype,"controls",1);E([k],A.prototype,"orientation",2);E([k],A.prototype,"title",1);E([k],A.prototype,"qualities",1);E([k],A.prototype,"audioTracks",1);E([k],A.prototype,"textTracks",1);E([k],A.prototype,"textRenderers",1);E([k],A.prototype,"duration",1);E([k],A.prototype,"paused",1);E([k],A.prototype,"muted",1);E([k],A.prototype,"currentTime",1);E([k],A.prototype,"volume",1);E([k],A.prototype,"playbackRate",1);E([C],A.prototype,"play",1);E([C],A.prototype,"pause",1);E([C],A.prototype,"enterFullscreen",1);E([C],A.prototype,"exitFullscreen",1);E([C],A.prototype,"enterPictureInPicture",1);E([C],A.prototype,"exitPictureInPicture",1);E([C],A.prototype,"seekToLiveEdge",1);E([C],A.prototype,"startLoading",1);E([C],A.prototype,"startLoadingPoster",1);E([C],A.prototype,"requestAirPlay",1);E([C],A.prototype,"requestGoogleCast",1);E([C],A.prototype,"setAudioGain",1);let rr=A;function sn(h,t){return fetch(h,t).then(e=>e.text()).then(e=>/type="static"/.test(e)?"on-demand":"live")}function Di(h,t){return fetch(h,t).then(e=>e.text()).then(e=>{const s=an(e);if(s)return Di(/^https?:/.test(s)?s:new URL(s,h).href,t);const i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return i==="live"&&nn(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function an(h){const t=h.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function nn(h){const t=h.split(`
`);for(const e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){const s=parseFloat(e.split(":")[1]);if(!isNaN(s))return s}return-1}const Se=new Map;class rn{constructor(t,e,s,i=[]){this.wd=t,this.a=e,this.X=s,this.Se=!1;const a=new ve,n=new Pe,r=new Ne,o=new Na,d=new Ga,l=new Ua,p=[d,l];this.Te=at(()=>{const b=e.$state.remotePlaybackLoader(),g=e.$props.preferNativeHLS()?[r,o,a,n,...p,...i]:[n,r,o,a,...p,...i];return b?[b,...g]:g});const{$state:f}=e;f.sources.set(Xs(e.$props.src()));for(const b of f.sources()){const g=this.Te().find(Y=>Y.canPlay(b));if(!g)continue;const v=g.mediaType(b);this.a.$state.source.set(b),this.a.$state.mediaType.set(v),this.a.$state.inferredViewType.set(v),this.X.set(g),this.Se=!0;break}}get c(){return this.a.delegate.c}connect(){const t=this.X();this.Se&&(this.bh(this.a.$state.source(),t),this.ch(t),this.Se=!1),c(this.Ak.bind(this)),c(this.Bk.bind(this)),c(this.Ck.bind(this)),c(this.Dk.bind(this)),c(this.Ek.bind(this))}Ak(){this.c("sources-change",[...Xs(this.a.$props.src()),...this.wd()])}Bk(){var n;const{$state:t}=this.a,e=t.sources(),s=u(t.source),i=this.dh(s,e);if(((n=e[0])==null?void 0:n.src)&&!i.src&&!i.type){const{crossOrigin:r}=t,o=Vt(r()),d=new AbortController;return Promise.all(e.map(l=>S(l.src)&&l.type==="?"?fetch(l.src,{method:"HEAD",credentials:o,signal:d.signal}).then(p=>(l.type=p.headers.get("content-type")||"??",Se.set(l.src,l.type),l)).catch(()=>l):l)).then(l=>{d.signal.aborted||(this.dh(u(t.source),l),Z())}),()=>d.abort()}Z()}dh(t,e){let s={src:"",type:""},i=null,a=new R("sources-change",{detail:{sources:e}}),n=this.Te(),{started:r,paused:o,currentTime:d,quality:l,savedState:p}=this.a.$state;for(const f of e){const b=n.find(g=>g.canPlay(f));if(b){s=f,i=b;break}}if(Te(s)){const f=l(),b=e.find(g=>g.src===(f==null?void 0:f.src));u(r)?p.set({paused:u(o),currentTime:u(d)}):p.set(null),b&&(s=b,a=new R("quality-change",{detail:{quality:f}}))}return zs(t,s)||this.bh(s,i,a),i!==u(this.X)&&this.ch(i,a),s}bh(t,e,s){this.c("source-change",t,s),this.c("media-type-change",(e==null?void 0:e.mediaType(t))||"unknown",s)}ch(t,e){this.a.$providerSetup.set(!1),this.c("provider-change",null,e),t&&u(()=>{var s;return(s=t.preconnect)==null?void 0:s.call(t,this.a)}),this.X.set(t),this.c("provider-loader-change",t,e)}Ck(){const t=this.a.$provider();if(!(!t||u(this.a.$providerSetup))){if(this.a.$state.canLoad()){Re(()=>t.setup(),t.scope),this.a.$providerSetup.set(!0);return}u(()=>{var e;return(e=t.preconnect)==null?void 0:e.call(t)})}}Dk(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),e=this.a.$state.source(),s=u(this.a.$state.crossOrigin),i=u(this.a.$props.preferNativeHLS);if(!zs(t==null?void 0:t.currentSrc,e)){if(this.a.$state.canLoad()){const a=new AbortController;return je(e)?(i||!vi())&&Di(e.src,{credentials:Vt(s),signal:a.signal}).then(n=>{this.c("stream-type-change",n)}).catch(Ns):Ie(e)?sn(e.src,{credentials:Vt(s),signal:a.signal}).then(n=>{this.c("stream-type-change",n)}).catch(Ns):this.c("stream-type-change","on-demand"),u(()=>{const n=u(this.a.$state.preload);return t==null?void 0:t.loadSource(e,n).catch(r=>{})}),()=>a.abort()}try{S(e.src)&&qt(new URL(e.src).origin)}catch{}}}Ek(){const t=this.X(),{providedPoster:e,source:s,canLoadPoster:i}=this.a.$state;if(!t||!t.loadPoster||!s()||!i()||e())return;const a=new AbortController,n=new R("source-change",{detail:s});return t.loadPoster(s(),this.a,a).then(r=>{this.c("poster-change",r||"",n)}).catch(()=>{this.c("poster-change","",n)}),()=>{a.abort()}}}function Xs(h){return(N(h)?h:[h]).map(t=>S(t)?{src:t,type:Ys(t)}:{...t,type:Ys(t.src,t.type)})}function Ys(h,t){return S(t)&&t.length?t:S(h)&&Se.has(h)?Se.get(h):!t&&je({src:h,type:""})?"application/x-mpegurl":!t&&Ie({src:h,type:""})?"application/dash+xml":!S(h)||h.startsWith("blob:")?"video/object":h.includes("youtube")||h.includes("youtu.be")?"video/youtube":h.includes("vimeo")&&!h.includes("progressive_redirect")&&!h.includes(".m3u8")?"video/vimeo":"?"}function zs(h,t){return(h==null?void 0:h.src)===(t==null?void 0:t.src)&&(h==null?void 0:h.type)===(t==null?void 0:t.type)}class hn{constructor(t,e){this.xd=t,this.a=e,this.eh=[],c(this.Fk.bind(this))}Fk(){const t=this.xd();for(const e of this.eh)if(!t.some(s=>s.id===e.id)){const s=e.id&&this.a.textTracks.getById(e.id);s&&this.a.textTracks.remove(s)}for(const e of t){const s=e.id||Ft.createId(e);this.a.textTracks.getById(s)||(e.id=s,this.a.textTracks.add(e))}this.eh=t}}var on=Object.defineProperty,cn=Object.getOwnPropertyDescriptor,ln=(h,t,e,s)=>{for(var i=cn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&on(t,e,i),i};const Bt=class Bt extends y{constructor(){super(...arguments),this.wd=w([]),this.xd=w([]),this.X=null,this.Ue=-1}onSetup(){this.a=T(),this.fh=new rn(this.wd,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.fh.connect(),new hn(this.xd,this.a);const e=new ResizeObserver(mt(this.pa.bind(this)));e.observe(t);const s=new MutationObserver(this.Gc.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.pa(),this.Gc(),P(()=>{e.disconnect(),s.disconnect()})}load(t){window.cancelAnimationFrame(this.Ue),this.Ue=requestAnimationFrame(()=>this.Gk(t)),P(()=>{window.cancelAnimationFrame(this.Ue)})}Gk(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.a;this.X===e&&(e==null?void 0:e.target)===t&&u(s)||(this.gh(),this.X=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.a).then(i=>{this.scope&&u(this.$state.loader)===e&&this.a.delegate.c("provider-change",i)}))}onDestroy(){this.X=null,this.gh()}gh(){var t;(t=this.a)==null||t.delegate.c("provider-change",null)}pa(){if(!this.el)return;const{player:t,$state:e}=this.a,s=this.el.offsetWidth,i=this.el.offsetHeight;t&&(e.mediaWidth.set(s),e.mediaHeight.set(i),t.el&&(Q(t.el,"--media-width",s+"px"),Q(t.el,"--media-height",i+"px")))}Gc(){const t=[],e=[],s=this.el.children;for(const i of s)if(!i.hasAttribute("data-vds")){if(i instanceof HTMLSourceElement){const a={id:i.id,src:i.src,type:i.type};for(const n of["id","src","width","height","bitrate","codec"]){const r=i.getAttribute(`data-${n}`);S(r)&&(a[n]=/id|src|codec/.test(n)?r:Number(r))}t.push(a)}else if(i instanceof HTMLTrackElement){const a={src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")};e.push({id:i.id||Ft.createId(a),...a})}}this.wd.set(t),this.xd.set(e),Z()}};Bt.props={loaders:[]},Bt.state=new rt({loader:null});let Ae=Bt;ln([C],Ae.prototype,"load");function $e(h,t){const e=String(h),s=e.length;if(s<t){const a=t-s;return`${"0".repeat(a)}${h}`}return e}function Mi(h){const t=Math.trunc(h/3600),e=Math.trunc(h%3600/60),s=Math.trunc(h%60),i=Number((h-Math.trunc(h)).toPrecision(3));return{hours:t,minutes:e,seconds:s,fraction:i}}function le(h,{padHrs:t=null,padMins:e=null,showHrs:s=!1,showMs:i=!1}={}){const{hours:a,minutes:n,seconds:r,fraction:o}=Mi(h),d=t?$e(a,2):a,l=e||it(e)&&h>=3600?$e(n,2):n,p=$e(r,2),f=i&&o>0?`.${String(o).replace(/^0?\./,"")}`:"",b=`${l}:${p}${f}`;return a>0||s?`${d}:${b}`:b}function Wt(h){const t=[],{hours:e,minutes:s,seconds:i}=Mi(h);return e>0&&t.push(`${e} hour`),s>0&&t.push(`${s} min`),(i>0||t.length===0)&&t.push(`${i} sec`),t.join(" ")}const Jt=class Jt extends y{constructor(){super(...arguments),this.Ve=!1,this.Hc=-1,this.Xe=-1}onSetup(){this.a=T()}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),x(t,"role","status"),x(t,"aria-live","polite");const{busy:e}=this.$state;this.setAttributes({"aria-busy":()=>e()?"true":null}),this.Ve=!0,c(this.fc.bind(this)),c(this.Fc.bind(this)),c(this.Hk.bind(this)),c(this.Ik.bind(this)),c(this.Jk.bind(this)),c(this.Kk.bind(this)),c(this.Lk.bind(this)),Z(),this.Ve=!1}fc(){const{paused:t}=this.a.$state;this.Rb(t()?"Pause":"Play")}Ik(){const{fullscreen:t}=this.a.$state;this.Rb(t()?"Enter Fullscreen":"Exit Fullscreen")}Jk(){const{pictureInPicture:t}=this.a.$state;this.Rb(t()?"Enter PiP":"Exit PiP")}Hk(){const{textTrack:t}=this.a.$state;this.Rb(t()?"Closed-Captions On":"Closed-Captions Off")}Fc(){const{muted:t,volume:e,audioGain:s}=this.a.$state;this.Rb(t()||e()===0?"Mute":`${Math.round(e()*(s()??1)*100)}% ${this.We("Volume")}`)}Kk(){const{seeking:t,currentTime:e}=this.a.$state,s=t();this.Hc>0?(window.clearTimeout(this.Xe),this.Xe=window.setTimeout(()=>{if(!this.scope)return;const i=u(e),a=Math.abs(i-this.Hc);if(a>=1){const n=i>=this.Hc,r=Wt(a);this.Rb(`${this.We(n?"Seek Forward":"Seek Backward")} ${r}`)}this.Hc=-1,this.Xe=-1},300)):s&&(this.Hc=u(e))}We(t){var s;const{translations:e}=this.$props;return((s=e==null?void 0:e())==null?void 0:s[t||""])??t}Lk(){const{label:t,busy:e}=this.$state,s=this.We(t());if(this.Ve)return;e.set(!0);const i=window.setTimeout(()=>void e.set(!1),150);return this.el&&$(this.el,"aria-label",s),S(s)&&this.dispatch("change",{detail:s}),()=>window.clearTimeout(i)}Rb(t){const{label:e}=this.$state;e.set(t)}};Jt.props={translations:null},Jt.state=new rt({label:null,busy:!1});let Bs=Jt;const Be=class Be extends y{onSetup(){this.a=T(),c(this.Mk.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.a.$state;Q(t,"pointer-events","none"),x(t,"role","group"),this.setAttributes({"data-visible":this.hh.bind(this),"data-fullscreen":s,"data-pip":e}),c(()=>{this.dispatch("change",{detail:this.hh()})}),c(this.Nk.bind(this)),c(()=>{const i=s();for(const a of["top","right","bottom","left"])Q(t,`padding-${a}`,i&&`env(safe-area-inset-${a})`)})}Nk(){if(!this.el)return;const{nativeControls:t}=this.a.$state,e=t();$(this.el,"aria-hidden",e?"true":null),Q(this.el,"display",e?"none":null)}Mk(){const{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=e()===2e3?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}hh(){const{controlsVisible:t}=this.a.$state;return t()}};Be.props={hideDelay:2e3,hideOnMouseLeave:!1};let Js=Be;class Li extends G{constructor(t){super(),this.j=t,this.zd=-1,this.Ad=-1,this.wb=null,c(this.Ok.bind(this))}onDestroy(){var t;(t=this.wb)==null||t.call(this),this.wb=null}Ok(){const t=this.j.M();if(!t){this.hide();return}const e=this.show.bind(this),s=this.hide.bind(this);this.j.yd(t,e,s)}show(t){var e,s,i;this.Ye(),window.cancelAnimationFrame(this.Ad),this.Ad=-1,(e=this.wb)==null||e.call(this),this.wb=null,this.zd=window.setTimeout(()=>{this.zd=-1;const a=this.j.q();a&&a.style.removeProperty("display"),u(()=>this.j.E(!0,t))},((i=(s=this.j).ih)==null?void 0:i.call(s))??0)}hide(t){this.Ye(),u(()=>this.j.E(!1,t)),this.Ad=requestAnimationFrame(()=>{var s;this.Ye(),this.Ad=-1;const e=this.j.q();if(e){const i=()=>{e.style.display="none",this.wb=null};if(da(e)){(s=this.wb)==null||s.call(this);const n=m(e,"animationend",i,{once:!0});this.wb=n}else i()}})}Ye(){window.clearTimeout(this.zd),this.zd=-1}}const Rt=ht();let dn=0;const Je=class Je extends y{constructor(){super(),this.ya=`media-tooltip-${++dn}`,this.M=w(null),this.q=w(null),new X;const{showDelay:t}=this.$props;new Li({M:this.M,q:this.q,ih:t,yd(e,s,i){m(e,"touchstart",a=>a.preventDefault(),{passive:!1}),c(()=>{Kt()&&m(e,"focus",s),m(e,"blur",i)}),m(e,"mouseenter",s),m(e,"mouseleave",i)},E:this.Pk.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){H(Rt,{M:this.M,q:this.q,Ze:this.Ze.bind(this),_e:this._e.bind(this),$e:this.$e.bind(this),af:this.af.bind(this)})}Ze(t){var s;this.M.set(t);let e=t.getAttribute("data-media-tooltip");e&&((s=this.el)==null||s.setAttribute(`data-media-${e}-tooltip`,"")),$(t,"data-describedby",this.ya)}_e(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.M.set(null)}$e(t){t.setAttribute("id",this.ya),t.style.display="none",x(t,"role","tooltip"),this.q.set(t)}af(t){t.removeAttribute("id"),t.removeAttribute("role"),this.q.set(null)}Pk(t){const e=this.M(),s=this.q();e&&$(e,"aria-describedby",t?this.ya:null);for(const i of[this.el,e,s])i&&$(i,"data-visible",t)}};Je.props={showDelay:700};let Zs=Je;const Ze=class Ze extends y{constructor(){super(),new X;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.xb(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.xb(t);const e=O(Rt);P(()=>e.af(t)),P(Ht(()=>{this.connectScope&&c(this.bf.bind(this))}))}xb(t){O(Rt).$e(t)}bf(){const{placement:t,offset:e,alignOffset:s}=this.$props;return Pi(this.el,this.Qk(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}Qk(){return O(Rt).M()}};Ze.props={placement:"top center",offset:0,alignOffset:0};let ti=Ze;const ts=class ts extends G{constructor(t){super(),this.j=t,new X,t.Sb&&new Ha(t.Sb)}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.o,"aria-pressed":this.Rk.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){x(t,"tabindex","0"),x(t,"role","button"),x(t,"type","button")}onConnect(t){tt(t,this.Sk.bind(this));for(const e of["click","touchstart"])this.listen(e,this.Tk.bind(this))}Rk(){return Nt(this.j.o())}Uk(t){Yi(this.j.o)&&this.j.o.set(e=>!e)}Sk(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.j.r??this.Uk).call(this,t)}Tk(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}};ts.props={disabled:!1};let I=ts;var un=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,fn=(h,t,e,s)=>{for(var i=pn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&un(t,e,i),i};const es=class es extends y{constructor(){super(),this.jh=w(!1),new I({o:this.jh})}get pressed(){return this.jh()}};es.props={disabled:!1,defaultPressed:!1};let Ee=es;fn([k],Ee.prototype,"pressed");const ss=class ss extends y{constructor(){super(),new I({o:this.o.bind(this),r:this.r.bind(this)})}onSetup(){this.a=T();const{canAirPlay:t,isAirPlayConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.Ic.bind(this),"aria-hidden":L(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),et(t,this.Jc.bind(this))}r(t){this.a.remote.requestAirPlay(t)}o(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="airplay"&&e()!=="disconnected"}Ic(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="airplay"&&e()}Jc(){const{remotePlaybackState:t}=this.a.$state;return`AirPlay ${t()}`}};ss.props=I.props;let ei=ss;const is=class is extends y{constructor(){super(),new I({o:this.o.bind(this),r:this.r.bind(this)})}onSetup(){this.a=T();const{canGoogleCast:t,isGoogleCastConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.Ic.bind(this),"aria-hidden":L(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),et(t,this.Jc.bind(this))}r(t){this.a.remote.requestGoogleCast(t)}o(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="google-cast"&&e()!=="disconnected"}Ic(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="google-cast"&&e()}Jc(){const{remotePlaybackState:t}=this.a.$state;return`Google Cast ${t()}`}};is.props=I.props;let si=is;const as=class as extends y{constructor(){super(),new I({o:this.o.bind(this),Sb:"togglePaused",r:this.r.bind(this)})}onSetup(){this.a=T();const{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),et(t,"Play")}r(t){const e=this.a.remote;this.o()?e.pause(t):e.play(t)}o(){const{paused:t}=this.a.$state;return!t()}};as.props=I.props;let ii=as;const ns=class ns extends y{constructor(){super(),new I({o:this.o.bind(this),Sb:"toggleCaptions",r:this.r.bind(this)})}onSetup(){this.a=T(),this.setAttributes({"data-active":this.o.bind(this),"data-supported":()=>!this.Tb(),"aria-hidden":L(this.Tb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),et(t,"Captions")}r(t){this.a.remote.toggleCaptions(t)}o(){const{textTrack:t}=this.a.$state,e=t();return!!e&&V(e)}Tb(){const{hasCaptions:t}=this.a.$state;return!t()}};ns.props=I.props;let ai=ns;const rs=class rs extends y{constructor(){super(),new I({o:this.o.bind(this),Sb:"toggleFullscreen",r:this.r.bind(this)})}onSetup(){this.a=T();const{fullscreen:t}=this.a.$state,e=this.Kc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":L(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),et(t,"Fullscreen")}r(t){const e=this.a.remote,s=this.$props.target();this.o()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}o(){const{fullscreen:t}=this.a.$state;return t()}Kc(){const{canFullscreen:t}=this.a.$state;return t()}};rs.props={...I.props,target:"prefer-media"};let ni=rs;const hs=class hs extends y{constructor(){super(),new I({o:this.o.bind(this),Sb:"toggleMuted",r:this.r.bind(this)})}onSetup(){this.a=T(),this.setAttributes({"data-muted":this.o.bind(this),"data-state":this.Ic.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),et(t,"Mute")}r(t){const e=this.a.remote;this.o()?e.unmute(t):e.mute(t)}o(){const{muted:t,volume:e}=this.a.$state;return t()||e()===0}Ic(){const{muted:t,volume:e}=this.a.$state,s=e();if(t()||s===0)return"muted";if(s>=.5)return"high";if(s<.5)return"low"}};hs.props=I.props;let ri=hs;const os=class os extends y{constructor(){super(),new I({o:this.o.bind(this),Sb:"togglePictureInPicture",r:this.r.bind(this)})}onSetup(){this.a=T();const{pictureInPicture:t}=this.a.$state,e=this.Kc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":L(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),et(t,"PiP")}r(t){const e=this.a.remote;this.o()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}o(){const{pictureInPicture:t}=this.a.$state;return t()}Kc(){const{canPictureInPicture:t}=this.a.$state;return t()}};os.props=I.props;let hi=os;const cs=class cs extends y{constructor(){super(),new X}onSetup(){this.a=T();const{seeking:t}=this.a.$state,{seconds:e}=this.$props,s=this.Kc.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":L(()=>!s())})}onAttach(t){x(t,"tabindex","0"),x(t,"role","button"),x(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),et(t,this.Jc.bind(this))}onConnect(t){tt(t,this.r.bind(this))}Kc(){const{canSeek:t}=this.a.$state;return t()}Jc(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}r(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.a.$state,a=i()+e();this.a.remote.seek(a,t)}};cs.props={disabled:!1,seconds:30};let oi=cs;const ls=class ls extends y{constructor(){super(),new X}onSetup(){this.a=T();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.a.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":L(()=>t()||s()),"aria-hidden":L(i)})}onAttach(t){x(t,"tabindex","0"),x(t,"role","button"),x(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){tt(t,this.r.bind(this))}r(t){const{disabled:e}=this.$props,{liveEdge:s}=this.a.$state;e()||s()||this.a.remote.seekToLiveEdge(t)}};ls.props={disabled:!1};let ci=ls;const bt=new rt({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return li(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return li(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function li(h,t,e){const s=t-h,i=e-h;return s>0?i/s:0}class Ii extends G{constructor(t){super(),this.Hb=t}onConnect(t){this.Ra=new IntersectionObserver(e=>{var s,i;(i=(s=this.Hb).callback)==null||i.call(s,e,this.Ra)},this.Hb),this.Ra.observe(t),P(this.Vk.bind(this))}Vk(){var t;(t=this.Ra)==null||t.disconnect(),this.Ra=void 0}}const Ue=ht(),$t=ht();function mn(h,t,e,s){return Fe(h,M(e,wa(s)),t)}function bn(h,t,e,s){const i=Fe(0,e,1),a=t-h,n=a*i,r=n/s,o=s*Math.round(r);return h+o}const ke={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class gn extends G{constructor(t,e){super(),this.j=t,this.a=e,this.p=null,this.cb=null,this.Ub=null,this.Bn=!1,this.cl=ct(s=>{this.db(this.Cd(s),s)},20,{leading:!0})}onSetup(){F($t)&&(this.Ra=O($t))}onConnect(){c(this.Wk.bind(this)),c(this.Xk.bind(this)),this.j.kh&&c(this.Yk.bind(this))}Yk(){var e;const{pointer:t}=this.a.$state;if(t()!=="coarse"||!this.j.kh()){this.p=null;return}this.p=(e=this.a.player.el)==null?void 0:e.querySelector("media-provider,[data-media-provider]"),this.p&&(m(this.p,"touchstart",this.Zk.bind(this),{passive:!0}),m(this.p,"touchmove",this._k.bind(this),{passive:!1}))}Zk(t){this.cb=t.touches[0]}_k(t){if(it(this.cb)||_e(t))return;const e=t.touches[0],s=e.clientX-this.cb.clientX,i=e.clientY-this.cb.clientY,a=this.$state.dragging();!a&&Math.abs(i)>5||a||(t.preventDefault(),Math.abs(s)>20&&(this.cb=e,this.Ub=this.$state.value(),this.cf(this.Ub,t)))}Wk(){const{hidden:t}=this.$props;this.listen("focus",this.Ec.bind(this)),this.listen("keydown",this.ic.bind(this)),this.listen("keyup",this.hc.bind(this)),!(t()||this.j.v())&&(this.listen("pointerenter",this.Oe.bind(this)),this.listen("pointermove",this.$k.bind(this)),this.listen("pointerleave",this.Pe.bind(this)),this.listen("pointerdown",this.al.bind(this)))}Xk(){this.j.v()||!this.$state.dragging()||(m(document,"pointerup",this.bl.bind(this),{capture:!0}),m(document,"pointermove",this.cl.bind(this)),m(document,"touchmove",this.dl.bind(this),{passive:!1}))}Ec(){this.db(this.$state.value())}df(t,e){var d,l,p,f;const{value:s,min:i,max:a,dragging:n}=this.$state,r=Math.max(i(),Math.min(t,a()));s.set(r);const o=this.createEvent("value-change",{detail:r,trigger:e});if(this.dispatch(o),(l=(d=this.j).l)==null||l.call(d,o),n()){const b=this.createEvent("drag-value-change",{detail:r,trigger:e});this.dispatch(b),(f=(p=this.j).S)==null||f.call(p,b)}}db(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.df(t,e)}Cd(t){let e,s=this.el.getBoundingClientRect(),{min:i,max:a}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:n,height:r}=s;e=(n-t.clientY)/r}else if(this.cb&&W(this.Ub)){const{width:n}=this.p.getBoundingClientRect(),r=(t.clientX-this.cb.clientX)/n,o=a()-i(),d=o*Math.abs(r);e=(r<0?this.Ub-d:this.Ub+d)/o}else{const{left:n,width:r}=s;e=(t.clientX-n)/r}return Math.max(i(),Math.min(a(),this.j.Da(bn(i(),a(),e,this.j.qa()))))}Oe(t){this.$state.pointing.set(!0)}$k(t){const{dragging:e}=this.$state;e()||this.db(this.Cd(t),t)}Pe(t){this.$state.pointing.set(!1)}al(t){if(t.button!==0)return;const e=this.Cd(t);this.cf(e,t),this.db(e,t)}cf(t,e){var a,n,r,o;const{dragging:s}=this.$state;if(s())return;s.set(!0),this.a.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),(n=(a=this.j).ef)==null||n.call(a,i),(o=(r=this.Ra)==null?void 0:r.onDragStart)==null||o.call(r)}lh(t,e){var a,n,r,o;const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.a.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),(n=(a=this.j).Dd)==null||n.call(a,i),this.cb=null,this.Ub=null,(o=(r=this.Ra)==null?void 0:r.onDragEnd)==null||o.call(r)}ic(t){if(!Object.keys(ke).includes(t.key))return;const{key:s}=t,i=this.Cn(t);if(!it(i)){this.db(i,t),this.df(i,t);return}const a=this.Dn(t);this.Bn||(this.Bn=s===this.ff,!this.$state.dragging()&&this.Bn&&this.cf(a,t)),this.db(a,t),this.ff=s}hc(t){if(!Object.keys(ke).includes(t.key)||!it(this.Cn(t)))return;const s=this.Bn?this.$state.pointerValue():this.Dn(t);this.df(s,t),this.lh(s,t),this.ff="",this.Bn=!1}Cn(t){let e=t.key,{min:s,max:i}=this.$state;return e==="Home"||e==="PageUp"?s():e==="End"||e==="PageDown"?i():!t.metaKey&&/^[0-9]$/.test(e)?(i()-s())/10*Number(e):null}Dn(t){var Y,dt;const{key:e,shiftKey:s}=t;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{min:a,max:n,value:r,pointerValue:o}=this.$state,d=this.j.qa(),l=this.j.eb(),p=s?l*i():l,f=Number(ke[e]),b=p*f,g=this.Bn?o():((dt=(Y=this.j).Y)==null?void 0:dt.call(Y))??r(),v=(g+b)/d;return Math.max(a(),Math.min(n(),Number((d*v).toFixed(3))))}bl(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();const e=this.Cd(t);this.db(e,t),this.lh(e,t)}dl(t){t.preventDefault()}}const pt=ht(()=>({})),ds=class ds extends G{constructor(t){super(),this.j=t,this.Lc=w(!0),this.Mc=w(!0),this.jl=mt((e,s)=>{var i,a;(i=this.el)==null||i.style.setProperty("--slider-fill",e+"%"),(a=this.el)==null||a.style.setProperty("--slider-pointer",s+"%")})}onSetup(){this.a=T();const t=new X;t.attach(this),this.$state.focused=t.focused.bind(t),F(pt)||H(pt,{default:"value"}),H(Ue,{bb:this.$props.orientation,Ed:this.j.v,nh:w(null)}),c(this.N.bind(this)),c(this.fl.bind(this)),c(this.Nc.bind(this)),this.gl(),new gn(this.j,this.a).attach(this),new Ii({callback:this.gf.bind(this)}).attach(this)}onAttach(t){x(t,"role","slider"),x(t,"tabindex","0"),x(t,"autocomplete","off"),c(this.oh.bind(this))}onConnect(t){P(xi(t,this.Lc.set)),c(this.Ea.bind(this))}gf(t){this.Mc.set(t[0].isIntersecting)}Ea(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Lc()||!this.Mc.bind(this))}N(){const{dragging:t,value:e,min:s,max:i}=this.$state;u(t)||e.set(mn(s(),i(),e(),this.j.qa()))}fl(){this.$state.step.set(this.j.qa())}Nc(){if(!this.j.v())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}il(){return Nt(this.j.v())}gl(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.il.bind(this),"aria-valuemin":this.j.Tm??this.$state.min,"aria-valuemax":this.j.hf??this.$state.max,"aria-valuenow":this.j.O,"aria-valuetext":this.j.P,"aria-orientation":t})}oh(){const{fillPercent:t,pointerPercent:e}=this.$state;this.jl(M(t(),3),M(e(),3))}};ds.props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};let _=ds;const Zt=class Zt extends y{constructor(){super(),new _({qa:this.$props.step,eb:this.$props.keyStep,Da:Math.round,v:this.$props.disabled,O:this.O.bind(this),P:this.P.bind(this)})}onSetup(){c(this.N.bind(this)),c(this.Oc.bind(this))}O(){const{value:t}=this.$state;return Math.round(t())}P(){const{value:t,max:e}=this.$state;return M(t()/e()*100,2)+"%"}N(){const{value:t}=this.$props;this.$state.value.set(t())}Oc(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}};Zt.props={..._.props,min:0,max:100,value:0},Zt.state=bt;let vt=Zt;const B=new Map,jt=new Map;class Ge{constructor(t,e,s){this.$src=t,this.$crossOrigin=e,this.a=s,this.$images=w([]),c(this.kl.bind(this))}static create(t,e){const s=T();return new Ge(t,e,s)}kl(){var i;const{canLoad:t}=this.a.$state;if(!t())return;const e=this.$src(),s=new AbortController;if(e){if(S(e)&&B.has(e)){const a=B.get(e);if(B.delete(e),B.set(e,a),B.size>30){const n=B.keys().next().value;B.delete(n)}this.$images.set(B.get(e))}else if(S(e)){const a=this.$crossOrigin(),n=e+"::"+a;if(!jt.has(n)){const r=new Promise(async(o,d)=>{try{const l=await fetch(e,{signal:s.signal,credentials:Vt(a)});if(l.headers.get("content-type")==="application/json"){const f=await l.json();if(N(f))if(f[0]&&"text"in f[0])o(this.ph(f));else{for(let b=0;b<f.length;b++){const g=f[b];z(ua(g),!1),z("url"in g&&S(g.url),!1),z("startTime"in g&&W(g.startTime),!1)}o(f)}else o(this.qh(f));return}U(()=>import("./prod-xoumjN75.js").then(f=>f.d),__vite__mapDeps([14,2])).then(async({parseResponse:f})=>{try{const{cues:b}=await f(l);o(this.ph(b))}catch(b){d(b)}})}catch(l){d(l)}}).then(o=>(s.signal.aborted||B.set(n,o),o)).catch(o=>{s.signal.aborted||this.Q(e,o)}).finally(()=>{S(n)&&jt.delete(n)});jt.set(n,r)}(i=jt.get(n))==null||i.then(r=>{s.signal.aborted||this.$images.set(r||[])})}else if(N(e))try{this.$images.set(this.ll(e))}catch(a){this.Q(e,a)}else try{this.$images.set(this.qh(e))}catch(a){this.Q(e,a)}return()=>{s.abort(),this.$images.set([])}}}ll(t){const e=this.rh();return t.map((s,i)=>(z(s.url&&S(s.url)),z("startTime"in s&&W(s.startTime)),{...s,url:S(s.url)?this.sh(s.url,e):s.url}))}qh(t){var n;z(S(t.url)),z(N(t.tiles)&&((n=t.tiles)==null?void 0:n.length));const e=new URL(t.url),s=[],i="tile_width"in t?t.tile_width:t.tileWidth,a="tile_height"in t?t.tile_height:t.tileHeight;for(const r of t.tiles)s.push({url:e,startTime:"start"in r?r.start:r.startTime,width:i,height:a,coords:{x:r.x,y:r.y}});return s}ph(t){for(let i=0;i<t.length;i++){const a=t[i];z("startTime"in a&&W(a.startTime)),z("text"in a&&S(a.text))}const e=[],s=this.rh();for(const i of t){const[a,n]=i.text.split("#"),r=this.ml(n);e.push({url:this.sh(a,s),startTime:i.startTime,endTime:i.endTime,width:r==null?void 0:r.w,height:r==null?void 0:r.h,coords:r&&W(r.x)&&W(r.y)?{x:r.x,y:r.y}:void 0})}return e}rh(){let t=u(this.$src);return!S(t)||!/^https?:/.test(t)?location.href:t}sh(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}ml(t){if(!t)return{};const[e,s]=t.split("="),i=s==null?void 0:s.split(","),a={};if(!e||!i)return null;for(let n=0;n<e.length;n++){const r=+i[n];isNaN(r)||(a[e[n]]=r)}return a}Q(t,e){}}const te=class te extends y{constructor(){super(...arguments),this.jf=[]}onSetup(){this.a=T(),this.X=Ge.create(this.$props.src,this.$state.crossOrigin),this.Ca(),this.setAttributes({"data-loading":this.Pc.bind(this),"data-error":this.fb.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":L(this.$state.hidden)})}onConnect(t){c(this.kf.bind(this)),c(this.Ea.bind(this)),c(this.Ca.bind(this)),c(this.Ma.bind(this)),c(this.nl.bind(this)),c(this.th.bind(this))}kf(){const t=this.$state.img();t&&(m(t,"load",this.tb.bind(this)),m(t,"error",this.Q.bind(this)))}Ca(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=t()!==null?t():s();e.set(i===!0?"anonymous":i)}Ma(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.ol(),e.set(!1),s.set(null)}}tb(){const{loading:t,error:e}=this.$state;this.th(),t.set(!1),e.set(null)}Q(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}Pc(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}fb(){const{error:t}=this.$state;return!it(t())}Ea(){const{hidden:t}=this.$state,{duration:e}=this.a.$state,s=this.X.$images();t.set(this.fb()||!Number.isFinite(e())||s.length===0)}uh(){return this.$props.time()}nl(){let t=this.X.$images();if(!t.length)return;let e=this.uh(),{src:s,activeThumbnail:i}=this.$state,a=-1,n=null;for(let r=t.length-1;r>=0;r--){const o=t[r];if(e>=o.startTime&&(!o.endTime||e<o.endTime)){a=r;break}}t[a]&&(n=t[a]),i.set(n),s.set((n==null?void 0:n.url.href)||"")}th(){if(!this.scope||this.$state.hidden())return;const t=this.el,e=this.$state.img(),s=this.$state.activeThumbnail();if(!e||!s||!t)return;let i=s.width??e.naturalWidth,a=(s==null?void 0:s.height)??e.naturalHeight,{maxWidth:n,maxHeight:r,minWidth:o,minHeight:d,width:l,height:p}=getComputedStyle(this.el);o==="100%"&&(o=parseFloat(l)+""),d==="100%"&&(d=parseFloat(p)+"");let f=Math.max(parseInt(o)/i,parseInt(d)/a),b=Math.min(Math.max(parseInt(o),parseInt(n))/i,Math.max(parseInt(d),parseInt(r))/a),g=!isNaN(b)&&b<1?b:f>1?f:1;this.Vb(t,"--thumbnail-width",`${i*g}px`),this.Vb(t,"--thumbnail-height",`${a*g}px`),this.Vb(e,"width",`${e.naturalWidth*g}px`),this.Vb(e,"height",`${e.naturalHeight*g}px`),this.Vb(e,"transform",s.coords?`translate(-${s.coords.x*g}px, -${s.coords.y*g}px)`:""),this.Vb(e,"max-width","none")}Vb(t,e,s){t.style.setProperty(e,s),this.jf.push(()=>t.style.removeProperty(e))}ol(){for(const t of this.jf)t();this.jf=[]}};te.props={src:null,time:0,crossOrigin:null},te.state=new rt({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});let di=te;var yn=Object.defineProperty,$n=Object.getOwnPropertyDescriptor,kn=(h,t,e,s)=>{for(var i=$n(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&yn(t,e,i),i};const ee=class ee extends y{get video(){return this.$state.video()}onSetup(){this.a=T(),this.ia=ce(vt.state),this.Ca(),this.setAttributes({"data-loading":this.Pc.bind(this),"data-hidden":this.$state.hidden,"data-error":this.fb.bind(this),"aria-hidden":L(this.$state.hidden)})}onAttach(t){c(this.pl.bind(this)),c(this.Mb.bind(this)),c(this.Ca.bind(this)),c(this.Ea.bind(this)),c(this.ql.bind(this)),c(this.rl.bind(this))}pl(){const t=this.$state.video();t&&(t.readyState>=2&&this.ed(),m(t,"canplay",this.ed.bind(this)),m(t,"error",this.Q.bind(this)))}Mb(){const{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Ca(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=t()!==null?t():s();e.set(i===!0?"anonymous":i)}Pc(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}fb(){const{error:t}=this.$state;return!it(t)}Ea(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.a.$state;e.set(s()&&(!t()||this.fb()||!Number.isFinite(i())))}ql(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}ed(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}Q(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}rl(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.a.$state,{pointerRate:i}=this.ia,a=t();e()&&a&&Number.isFinite(s())&&Number.isFinite(i())&&(a.currentTime=i()*s())}};ee.props={src:null,crossOrigin:null},ee.state=new rt({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});let Ce=ee;kn([k],Ce.prototype,"video");var wn=Object.defineProperty,Tn=Object.getOwnPropertyDescriptor,vn=(h,t,e,s)=>{for(var i=Tn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&wn(t,e,i),i};const us=class us extends y{onSetup(){this.ia=ce(vt.state),this.Qc=O(pt),this.sl=at(this.getValueText.bind(this))}getValueText(){var g,v;const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:a,showHours:n,showMs:r}=this.$props,{value:o,pointerValue:d,min:l,max:p}=this.ia,f=(e==null?void 0:e())??this.Qc.default,b=t()==="current"?o():d();if(f==="percent"){const Y=p()-l(),dt=b/Y*100;return(this.Qc.percent??M)(dt,s())+"%"}else return f==="time"?(this.Qc.time??le)(b,{padHrs:i(),padMins:a(),showHrs:n(),showMs:r()}):(((v=(g=this.Qc).value)==null?void 0:v.call(g,b))??b.toFixed(2))+""}};us.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};let qe=us;vn([C],qe.prototype,"getValueText");const ps=class ps extends y{constructor(){super(...arguments),this.vh=mt(()=>{const{Ed:t,bb:e}=this.ia;if(t())return;const s=this.el,{offset:i,noClamp:a}=this.$props;s&&Pn(s,{clamp:!a(),offset:i(),orientation:e()})})}onSetup(){this.ia=O(Ue);const{active:t}=ce(vt.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{nh:e}=this.ia;e.set(t),P(()=>e.set(null)),c(this.vh.bind(this));const s=new ResizeObserver(this.vh.bind(this));s.observe(t),P(()=>s.disconnect())}};ps.props={offset:0,noClamp:!1};let ui=ps;function Pn(h,{clamp:t,offset:e,orientation:s}){const i=getComputedStyle(h),a=parseFloat(i.width),n=parseFloat(i.height),r={top:null,right:null,bottom:null,left:null};if(r[s==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,s==="horizontal"){const o=a/2;if(!t)r.left=`calc(var(--slider-pointer) - ${o}px)`;else{const d=`max(0px, calc(var(--slider-pointer) - ${o}px))`,l=`calc(100% - ${a}px)`;r.left=`min(${d}, ${l})`}}else{const o=n/2;if(!t)r.bottom=`calc(var(--slider-pointer) - ${o}px)`;else{const d=`max(${o}px, calc(var(--slider-pointer) - ${o}px))`,l=`calc(100% - ${n}px)`;r.bottom=`min(${d}, ${l})`}}Object.assign(h.style,r)}const se=class se extends y{constructor(){super(...arguments),this.wh=ct(this.Na.bind(this),25)}onSetup(){this.a=T();const{audioGain:t}=this.a.$state;H(pt,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new _({qa:this.$props.step,eb:this.$props.keyStep,Da:Math.round,v:this.v.bind(this),hf:this.hf.bind(this),O:this.O.bind(this),P:this.P.bind(this),S:this.S.bind(this),l:this.l.bind(this)}).attach(this),c(this.Fc.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),x(t,"aria-label","Volume");const{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":L(()=>!e())})}O(){const{value:t}=this.$state,{audioGain:e}=this.a.$state;return Math.round(t()*(e()??1))}P(){const{value:t,max:e}=this.$state,{audioGain:s}=this.a.$state;return M(t()/e()*(s()??1)*100,2)+"%"}hf(){const{audioGain:t}=this.a.$state;return this.$state.max()*(t()??1)}v(){const{disabled:t}=this.$props,{canSetVolume:e}=this.a.$state;return t()||!e()}Fc(){const{muted:t,volume:e}=this.a.$state,s=t()?0:e()*100;this.$state.value.set(s),this.dispatch("value-change",{detail:s})}Na(t){if(!t.trigger)return;const e=M(t.detail/100,3);this.a.remote.changeVolume(e,t)}l(t){this.wh(t)}S(t){this.wh(t)}};se.props={..._.props,keyStep:5,shiftKeyMultiplier:2},se.state=bt;let pi=se;const ie=class ie extends y{onSetup(){this.a=T(),H(pt,{default:"percent",percent:(t,e)=>M(this.$state.value(),e)+"%"}),new _({qa:this.$props.step,eb:this.$props.keyStep,Da:Math.round,v:this.v.bind(this),O:this.O.bind(this),P:this.P.bind(this),S:this.S.bind(this),l:this.l.bind(this)}).attach(this),c(this.Oc.bind(this)),c(this.tl.bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),x(t,"aria-label","Audio Boost");const{canSetAudioGain:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":L(()=>!e())})}O(){const{value:t}=this.$state;return Math.round(t())}P(){const{value:t}=this.$state;return t()+"%"}Oc(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}tl(){const{audioGain:t}=this.a.$state,e=((t()??1)-1)*100;this.$state.value.set(e),this.dispatch("value-change",{detail:e})}v(){const{disabled:t}=this.$props,{canSetAudioGain:e}=this.a.$state;return t()||!e()}xh(t){if(!t.trigger)return;const e=M(1+t.detail/100,2);this.a.remote.changeAudioGain(e,t)}l(t){this.xh(t)}S(t){this.xh(t)}};ie.props={..._.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300},ie.state=bt;let fi=ie;const ae=class ae extends y{constructor(){super(...arguments),this.yh=ct(this.ul.bind(this),25)}onSetup(){this.a=T(),new _({qa:this.$props.step,eb:this.$props.keyStep,Da:this.Da,v:this.v.bind(this),O:this.O.bind(this),P:this.P.bind(this),S:this.S.bind(this),l:this.l.bind(this)}).attach(this),c(this.Oc.bind(this)),c(this.Qe.bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),x(t,"aria-label","Speed");const{canSetPlaybackRate:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":L(()=>!e())})}O(){const{value:t}=this.$state;return t()}P(){const{value:t}=this.$state;return t()+"x"}Oc(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}Qe(){const{playbackRate:t}=this.a.$state,e=t();this.$state.value.set(e),this.dispatch("value-change",{detail:e})}Da(t){return M(t,2)}v(){const{disabled:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return t()||!e()}ul(t){if(!t.trigger)return;const e=t.detail;this.a.remote.changePlaybackRate(e,t)}l(t){this.yh(t)}S(t){this.yh(t)}};ae.props={..._.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2},ae.state=bt;let mi=ae;const ne=class ne extends y{constructor(){super(...arguments),this.Rc=at(()=>{const{qualities:t}=this.a.$state;return Si(t())}),this.zh=ct(this.Za.bind(this),25)}onSetup(){this.a=T(),new _({qa:this.$props.step,eb:this.$props.keyStep,Da:Math.round,v:this.v.bind(this),O:this.O.bind(this),P:this.P.bind(this),S:this.S.bind(this),l:this.l.bind(this)}).attach(this),c(this.vl.bind(this)),c(this.wl.bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),x(t,"aria-label","Video Quality");const{qualities:e,canSetQuality:s}=this.a.$state,i=at(()=>s()&&e().length>0);this.setAttributes({"data-supported":i,"aria-hidden":L(()=>!i())})}O(){const{value:t}=this.$state;return t()}P(){const{quality:t}=this.a.$state;if(!t())return"";const{height:e,bitrate:s}=t(),i=s&&s>0?`${(s/1e6).toFixed(2)} Mbps`:null;return e?`${e}p${i?` (${i})`:""}`:"Auto"}vl(){const t=this.Rc();this.$state.max.set(Math.max(0,t.length-1))}wl(){let{quality:t}=this.a.$state,e=this.Rc(),s=Math.max(0,e.indexOf(t()));this.$state.value.set(s),this.dispatch("value-change",{detail:s})}v(){const{disabled:t}=this.$props,{canSetQuality:e,qualities:s}=this.a.$state;return t()||s().length<=1||!e()}Za(t){if(!t.trigger)return;const{qualities:e}=this.a,s=u(this.Rc)[t.detail];this.a.remote.changeQuality(e.indexOf(s),t)}l(t){this.zh(t)}S(t){this.zh(t)}};ne.props={..._.props,step:1,keyStep:1,shiftKeyMultiplier:1},ne.state=bt;let bi=ne;const re=class re extends y{constructor(){super(),this.Ah=w(null),this.mf=!1;const{noSwipeGesture:t}=this.$props;new _({kh:()=>!t(),Y:this.Y.bind(this),qa:this.qa.bind(this),eb:this.eb.bind(this),Da:this.Da,v:this.v.bind(this),O:this.O.bind(this),P:this.P.bind(this),ef:this.ef.bind(this),S:this.S.bind(this),Dd:this.Dd.bind(this),l:this.l.bind(this)})}onSetup(){this.a=T(),H(pt,{default:"time",value:this.xl.bind(this),time:this.yl.bind(this)}),this.setAttributes({"data-chapters":this.zl.bind(this)}),this.setStyles({"--slider-progress":this.Al.bind(this)}),c(this.Qb.bind(this)),c(this.Bl.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),x(t,"aria-label","Seek")}onConnect(t){c(this.Cl.bind(this)),Ve(this.a.textTracks,"chapters",this.Ah.set)}Al(){const{bufferedEnd:t,duration:e}=this.a.$state;return M(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}zl(){var e;const{duration:t}=this.a.$state;return((e=this.Ah())==null?void 0:e.cues.length)&&Number.isFinite(t())&&t()>0}Bl(){this.lf=ct(this.Ja.bind(this),this.$props.seekingRequestThrottle())}Qb(){if(this.$state.hidden())return;const{value:t,dragging:e}=this.$state,s=this.Y();u(e)||(t.set(s),this.dispatch("value-change",{detail:s}))}Cl(){const t=this.a.player.el,{nh:e}=O(Ue);t&&e()&&$(t,"data-preview",this.$state.active())}Ja(t,e){this.a.remote.seeking(t,e)}Dl(t,e,s){this.lf.cancel();const{live:i}=this.a.$state;if(i()&&e>=99){this.a.remote.seekToLiveEdge(s);return}this.a.remote.seek(t,s)}ef(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:s}=this.a.$state;this.mf=!s(),this.a.remote.pause(t)}}S(t){this.lf(this.Wb(t.detail),t)}Dd(t){const{seeking:e}=this.a.$state;u(e)||this.Ja(this.Wb(t.detail),t);const s=t.detail;this.Dl(this.Wb(s),s,t);const{pauseWhileDragging:i}=this.$props;i()&&this.mf&&(this.a.remote.play(t),this.mf=!1)}l(t){const{dragging:e}=this.$state;e()||!t.trigger||this.Dd(t)}Y(){const{currentTime:t}=this.a.$state;return this.El(t())}qa(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}eb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Da(t){return M(t,3)}v(){const{disabled:t}=this.$props,{canSeek:e}=this.a.$state;return t()||!e()}O(){const{value:t}=this.$state;return Math.round(t())}P(){const t=this.Wb(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?`${Wt(t)} out of ${Wt(e())}`:"live"}Wb(t){const{duration:e}=this.a.$state;return M(t/100*e(),5)}El(t){const{liveEdge:e,duration:s}=this.a.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?i*100:100}xl(t){const e=this.Wb(t),{live:s,duration:i}=this.a.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}yl(t,e){const s=this.Wb(t),{live:i,duration:a}=this.a.$state,n=i()?s-a():s;return Number.isFinite(s)?`${n<0?"-":""}${le(Math.abs(n),e)}`:"LIVE"}};re.props={..._.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100},re.state=bt;let Oe=re;var xn=Object.defineProperty,Sn=Object.getOwnPropertyDescriptor,de=(h,t,e,s)=>{for(var i=Sn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&xn(t,e,i),i};const fs=class fs extends y{constructor(){super(...arguments),this.yb=null,this.ja=[],this.Gd=w(null),this.ka=w([]),this.Xb=w(-1),this.Hd=w(-1),this.Sc=0,this.Ml=mt(t=>{var r;let e,s=this.ka(),{clipStartTime:i}=this.a.$state,a=i(),n=this.qf(s);for(let o=this.Sc;o<this.ja.length;o++)if(e=this.pf(s[o],t,a,n),(r=this.ja[o])==null||r.style.setProperty("--chapter-progress",e+"%"),e<100){this.Sc=o;break}}),this.Nl=at(this.Ol.bind(this)),this.Id=He(()=>{const t=u(this.Gd);!this.scope||!t||!t.cues.length||(this.ka.set(this.Pl(t.cues)),this.Xb.set(0),this.Sc=0)},150,!0)}get cues(){return this.ka()}get activeCue(){return this.ka()[this.Xb()]||null}get activePointerCue(){return this.ka()[this.Hd()]||null}onSetup(){this.a=T(),this.Fd=ce(Oe.state)}onAttach(t){Ve(this.a.textTracks,"chapters",this.Bh.bind(this)),c(this.Fl.bind(this))}onConnect(){P(()=>this.z.bind(this))}onDestroy(){this.Bh(null)}setRefs(t){var e;if(this.ja=t,(e=this.nf)==null||e.dispose(),this.ja.length===1){const s=this.ja[0];s.style.width="100%",s.style.setProperty("--chapter-fill","var(--slider-fill)"),s.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.ja.length>0&&Re(()=>this.Gl(),this.nf=zi())}Bh(t){u(this.Gd)!==t&&(this.z(),this.Gd.set(t))}z(){var t;this.ja=[],this.ka.set([]),this.Xb.set(-1),this.Hd.set(-1),this.Sc=0,(t=this.nf)==null||t.dispose()}Gl(){this.ja.length&&c(this.Hl.bind(this))}Hl(){const{hidden:t}=this.Fd;t()||(c(this.Il.bind(this)),c(this.Jl.bind(this)),c(this.Kl.bind(this)),c(this.Ll.bind(this)))}Il(){const t=this.ka();if(!t.length)return;let e,{clipStartTime:s,clipEndTime:i}=this.a.$state,a=s(),n=i()||t[t.length-1].endTime,r=n-a,o=100;for(let d=0;d<t.length;d++)if(e=t[d],this.ja[d]){const l=d===t.length-1?o:M((e.endTime-Math.max(a,e.startTime))/r*100,3);this.ja[d].style.width=l+"%",o-=l}}Jl(){let{liveEdge:t,clipStartTime:e,duration:s}=this.a.$state,{fillPercent:i,value:a}=this.Fd,n=this.ka(),r=t(),o=u(this.Xb),d=n[o],l=r?this.ka.length-1:this.Ch(d&&d.startTime/s()*100<=u(a)?o:0,i());r||!d?this.of(0,n.length,100):l>o?this.of(o,l,100):l<o&&this.of(l+1,o+1,0);const p=r?100:this.pf(n[l],i(),e(),this.qf(n));this.Dh(this.ja[l],p),this.Xb.set(l)}Kl(){let{pointing:t,pointerPercent:e}=this.Fd;if(!t()){this.Hd.set(-1);return}const s=this.Ch(0,e());this.Hd.set(s)}of(t,e,s){for(let i=t;i<e;i++)this.Dh(this.ja[i],s)}Dh(t,e){t&&(t.style.setProperty("--chapter-fill",e+"%"),$(t,"data-active",e>0&&e<100),$(t,"data-ended",e===100))}Ch(t,e){let s=0,i=this.ka();if(e===0)return 0;if(e===100)return i.length-1;let{clipStartTime:a}=this.a.$state,n=a(),r=this.qf(i);for(let o=t;o<i.length;o++)if(s=this.pf(i[o],e,n,r),s>=0&&s<100)return o;return 0}Ll(){this.Ml(this.Nl())}Ol(){const{bufferedEnd:t,duration:e}=this.a.$state;return M(Math.min(t()/Math.max(e(),1),1),3)*100}qf(t){var i;const{clipEndTime:e}=this.a.$state,s=e();return s>0?s:((i=t[t.length-1])==null?void 0:i.endTime)||0}pf(t,e,s,i){if(this.ka().length===0)return 0;const n=i-s,r=Math.max(0,t.startTime-s),o=Math.min(i,t.endTime)-s,d=r/n,l=d*100,p=Math.min(1,d+(o-r)/n)*100;return Math.max(0,M(e>=p?100:(e-l)/(p-l)*100,3))}Pl(t){let e=[],{clipStartTime:s,clipEndTime:i,duration:a}=this.a.$state,n=s(),r=i()||1/0;t=t.filter(l=>l.startTime<=r&&l.endTime>=n);const o=t[0];o&&o.startTime>n&&e.push(new window.VTTCue(n,o.startTime,""));for(let l=0;l<t.length-1;l++){const p=t[l],f=t[l+1];if(e.push(p),f){const b=f.startTime-p.endTime;b>0&&e.push(new window.VTTCue(p.endTime,p.endTime+b,""))}}const d=t[t.length-1];if(d){e.push(d);const l=a();l>=0&&l-d.endTime>1&&e.push(new window.VTTCue(d.endTime,a(),""))}return e}Fl(){const{source:t}=this.a.$state;t(),this.pc()}pc(){if(!this.scope)return;const{disabled:t}=this.$props;if(t()){this.ka.set([]),this.Xb.set(0),this.Sc=0;return}const e=this.Gd();if(e){const s=this.Id.bind(this);s(),P(m(e,"add-cue",s)),P(m(e,"remove-cue",s)),c(this.Ql.bind(this))}return this.yb=this.Rl(),this.yb&&c(this.Sl.bind(this)),()=>{this.yb&&(this.yb.textContent="",this.yb=null)}}Ql(){this.a.$state.duration(),this.Id()}Sl(){const t=this.activePointerCue||this.activeCue;this.yb&&(this.yb.textContent=(t==null?void 0:t.text)||"")}Tl(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}Rl(){const t=this.Tl();return t?t.querySelector('[data-part="chapter-title"]'):null}};fs.props={disabled:!1};let ft=fs;de([k],ft.prototype,"cues");de([k],ft.prototype,"activeCue");de([k],ft.prototype,"activePointerCue");de([C],ft.prototype,"setRefs");const D=ht();function An(h,t){const e=ya(h,t);for(const{el:s,top:i,left:a}of e)s.scroll({top:i,left:a,behavior:t.behavior})}function En(h,t={}){An(h,{scrollMode:"if-needed",block:"center",inline:"center",...t})}const Cn=["a[href]","[tabindex]","input","select","button"].map(h=>`${h}:not([aria-hidden='true'])`).join(","),qn=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class On{constructor(t){this.j=t,this.Tc=-1,this.Sa=null,this.ra=[]}get A(){return this.ra}Ul(t){m(t,"focus",this.Ec.bind(this)),this.Sa=t,P(()=>{this.Sa=null})}yd(){this.Sa&&(this.Ha(),m(this.Sa,"keyup",this.hc.bind(this)),m(this.Sa,"keydown",this.ic.bind(this)),P(()=>{this.Tc=-1,this.ra=[]}))}Ha(){this.Tc=0,this.ra=this.Vl()}Eh(t=this.Fh()){const e=this.ra[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{En(e,{behavior:"smooth",boundary:s=>!s.hasAttribute("data-root")})})})}Gh(t=!0){const e=this.Fh();this.Yb(e>=0?e:0,t)}Yb(t,e=!0){var s;this.Tc=t,this.ra[t]?(this.ra[t].focus({preventScroll:!0}),e&&this.Eh(t)):(s=this.Sa)==null||s.focus({preventScroll:!0})}Fh(){return this.ra.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}Ec(){this.Tc>=0||(this.Ha(),this.Gh())}Hh(t){const e=t.target;if(pa(t)&&e instanceof Element){const s=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!s}return qn.has(t.key)}hc(t){this.Hh(t)&&(t.stopPropagation(),t.preventDefault())}ic(t){if(this.Hh(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.Wl(t);break;case"Tab":this.Yb(this.rf(t.shiftKey?-1:1));break;case"ArrowUp":this.Yb(this.rf(-1));break;case"ArrowDown":this.Yb(this.rf(1));break;case"Home":case"PageUp":this.Yb(0);break;case"End":case"PageDown":this.Yb(this.ra.length-1);break}}rf(t){var s;let e=this.Tc;do e=(e+t+this.ra.length)%this.ra.length;while(((s=this.ra[e])==null?void 0:s.offsetParent)===null);return e}Vl(){if(!this.Sa)return[];const t=this.Sa.querySelectorAll(Cn),e=[],s=i=>i.getAttribute("role")==="menu";for(const i of t)Tt(i)&&i.offsetParent!==null&&Ei(this.Sa,i,s)&&e.push(i);return e}}var Dn=Object.defineProperty,Mn=Object.getOwnPropertyDescriptor,Ot=(h,t,e,s)=>{for(var i=Mn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Dn(t,e,i),i};let Ln=0;const ms=class ms extends y{constructor(){super(),this.T=w(!1),this.Ed=w(!1),this.M=w(null),this.q=w(null),this.Vc=new Set,this.Jd=null,this.Ld=!1,this.Ih=w(!1),this.Md=new Set,this.zf=!1,this.im=this.jm.bind(this),this.Cf=!1,this.gm=this.km.bind(this),this.hm=this.lm.bind(this),this.pa=mt(()=>{const e=u(this.q);if(!e)return;let s=0,i=getComputedStyle(e),a=[...e.children];for(const n of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])s+=parseFloat(i[n])||0;for(const n of a)if(Tt(n)&&n.style.display==="contents")a.push(...n.children);else if(n.nodeType===3)s+=parseFloat(getComputedStyle(n).fontSize);else if(Tt(n)){if(!fa(n))continue;const r=getComputedStyle(n);s+=n.offsetHeight+(parseFloat(r.marginTop)||0)+(parseFloat(r.marginBottom)||0)}Q(e,"--menu-height",s+"px")}),this.Bf=!1;const{showDelay:t}=this.$props;this.Kd=new Li({M:this.M,q:this.q,ih:t,yd:(e,s,i)=>{tt(e,n=>{this.T()?i(n):s(n)});const a=this.Xl();a&&tt(a,n=>{n.stopPropagation(),i(n)})},E:this.Yl.bind(this)})}get triggerElement(){return this.M()}get contentElement(){return this.q()}get isSubmenu(){return!!this.Uc}onSetup(){this.a=T();const t=++Ln;this.sf=`media-menu-${t}`,this.tf=`media-menu-button-${t}`,this.Zb=new On({Wl:this.close.bind(this)}),F(D)&&(this.Uc=O(D)),this.Zl(),this.setAttributes({"data-open":this.T,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.v.bind(this)}),H(D,{_l:this.M,q:this.q,T:this.T,_b:w(""),Um:!!this.Uc,gb:this.gb.bind(this),uf:this.uf.bind(this),vf:this.vf.bind(this),wf:this.wf.bind(this),xf:this.xf.bind(this),yf:this.yf.bind(this),$l:e=>{this.Md.add(e),P(()=>{this.Md.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){var e;c(this.am.bind(this)),this.isSubmenu&&((e=this.Uc)==null||e.yf(this))}onDestroy(){this.M.set(null),this.q.set(null),this.Jd=null,this.Md.clear()}Zl(){let t=-1,e=F($t)?O($t):null;H($t,{onDragStart:()=>{var s;(s=e==null?void 0:e.onDragStart)==null||s.call(e),window.clearTimeout(t),t=-1,this.Ld=!0},onDragEnd:()=>{var s;(s=e==null?void 0:e.onDragEnd)==null||s.call(e),t=window.setTimeout(()=>{this.Ld=!1,t=-1},300)}})}am(){const t=this.bm();this.isSubmenu||this.pa(),this.Jh(t),t&&(c(()=>{const{height:e}=this.a.$state,s=this.q();s&&Q(s,"--player-height",e()+"px")}),this.Zb.yd(),this.listen("pointerup",this.cm.bind(this)),m(window,"pointerup",this.dm.bind(this)))}uf(t){const e=t.el,s=this.isSubmenu,i=L(this.v.bind(this));x(e,"tabindex",s?"-1":"0"),x(e,"role",s?"menuitem":"button"),$(e,"id",this.tf),$(e,"aria-haspopup","menu"),$(e,"aria-expanded","false"),$(e,"data-root",!this.isSubmenu),$(e,"data-submenu",this.isSubmenu),c(()=>{$(e,"data-open",this.T()),$(e,"aria-disabled",i())}),this.M.set(e),P(()=>{this.M.set(null)})}vf(t){var a;const e=t.el;e.style.setProperty("display","none"),$(e,"id",this.sf),x(e,"role","menu"),x(e,"tabindex","-1"),$(e,"data-root",!this.isSubmenu),$(e,"data-submenu",this.isSubmenu),this.q.set(e),P(()=>this.q.set(null)),c(()=>$(e,"data-open",this.T())),this.Zb.Ul(e),this.Jh(!1);const i=this.em.bind(this);this.isSubmenu?(a=this.Uc)==null||a.$l(i):(t.listen("transitionstart",i),t.listen("transitionend",i),t.listen("animationend",this.pa),t.listen("vds-menu-resize",this.pa))}wf(t){this.Jd=t}Jh(t){const e=u(this.q);e&&$(e,"aria-hidden",Nt(!t))}xf(t){this.Ih.set(t)}Yl(t,e){var a,n,r,o,d,l;if(this.zf=Ai(e),e==null||e.stopPropagation(),this.T()===t)return;if(this.v()){t&&this.Kd.hide(e);return}(a=this.el)==null||a.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.M(),i=this.q();if(s&&($(s,"aria-controls",t&&this.sf),$(s,"aria-expanded",Nt(t))),i&&$(i,"aria-labelledby",t&&this.tf),this.T.set(t),this.fm(e),Z(),this.zf){t?i==null||i.focus():s==null||s.focus();for(const p of[this.el,i])p&&p.setAttribute("data-keyboard","")}else for(const p of[this.el,i])p&&p.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.a.activeMenu!==this&&((n=this.a.activeMenu)==null||n.close(e),this.a.activeMenu=this),(o=(r=this.Jd)==null?void 0:r.Af)==null||o.call(r,e);else{if(this.isSubmenu)for(const p of this.Vc)p.close(e);else this.a.activeMenu=null;(l=(d=this.Jd)==null?void 0:d.Vm)==null||l.call(d,e)}t&&requestAnimationFrame(this.Kh.bind(this))}Kh(){this.Bf||this.Cf||(this.Zb.Ha(),requestAnimationFrame(()=>{this.zf?this.Zb.Gh():this.Zb.Eh()}))}bm(){return!this.v()&&this.T()}v(){return this.Ed()||this.Ih()}gb(t){this.Ed.set(t)}cm(t){const e=this.q();this.Ld||e&&Rs(e,t)||t.stopPropagation()}dm(t){const e=this.q();this.Ld||e&&Rs(e,t)||this.close(t)}Xl(){var e;const t=(e=this.el)==null?void 0:e.querySelector('[data-part="close-target"]');return this.el&&t&&Ei(this.el,t,s=>s.getAttribute("role")==="menu")?t:null}fm(t){this.isSubmenu||(this.T()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}yf(t){this.Vc.add(t),m(t,"open",this.gm),m(t,"close",this.hm),P(this.im)}jm(t){this.Vc.delete(t)}km(t){var s;this.Cf=!0;const e=this.q();this.isSubmenu&&((s=this.triggerElement)==null||s.setAttribute("aria-hidden","true"));for(const i of this.Vc)if(i!==t.target)for(const a of[i.el,i.triggerElement])a==null||a.setAttribute("aria-hidden","true");if(e){const i=t.target.el;for(const a of e.children)a.contains(i)?a.setAttribute("data-open",""):a!==i&&a.setAttribute("data-hidden","")}}lm(t){var s;this.Cf=!1;const e=this.q();this.isSubmenu&&((s=this.triggerElement)==null||s.setAttribute("aria-hidden","false"));for(const i of this.Vc)for(const a of[i.el,i.triggerElement])a==null||a.setAttribute("aria-hidden","false");if(e)for(const i of e.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}em(t){const e=this.q();e&&t.propertyName==="height"&&(this.Bf=t.type==="transitionstart",$(e,"data-transition",this.Bf?"height":null),this.T()&&this.Kh());for(const s of this.Md)s(t)}open(t){u(this.T)||(this.Kd.show(t),Z())}close(t){u(this.T)&&(this.Kd.hide(t),Z())}};ms.props={showDelay:0};let nt=ms;Ot([k],nt.prototype,"triggerElement");Ot([k],nt.prototype,"contentElement");Ot([k],nt.prototype,"isSubmenu");Ot([C],nt.prototype,"open");Ot([C],nt.prototype,"close");var In=Object.defineProperty,jn=Object.getOwnPropertyDescriptor,Vn=(h,t,e,s)=>{for(var i=jn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&In(t,e,i),i};const bs=class bs extends y{constructor(){super(),this.Lh=w(null),new X}get expanded(){var t;return((t=this.n)==null?void 0:t.T())??!1}onSetup(){this.n=O(D)}onAttach(t){this.n.uf(this),c(this.Nc.bind(this)),x(t,"type","button")}onConnect(t){c(this.mm.bind(this)),this.Gc();const e=new MutationObserver(this.Gc.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),P(()=>e.disconnect()),tt(t,s=>{this.dispatch("select",{trigger:s})})}Nc(){this.n.xf(this.$props.disabled())}mm(){const t=this.Lh();t&&c(()=>{const e=this.n._b();e&&(t.textContent=e)})}Gc(){var e;const t=(e=this.el)==null?void 0:e.querySelector('[data-part="hint"]');this.Lh.set(t??null)}};bs.props={disabled:!1};let De=bs;Vn([k],De.prototype,"expanded");const gs=class gs extends y{constructor(){super(...arguments),this.G=null}onSetup(){this.a=T(),H(_t,{xb:this.nm.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){var t;(t=this.G)==null||t.remove(),this.G=null}nm(t){this.Mh(!1),this.G=t,Ht(()=>{Ht(()=>{this.connectScope&&c(this.Nc.bind(this))})})}Nc(){const{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,s=e();this.Mh(s==="fullscreen"?!t():!s)}Mh(t){var i;if(!this.G)return;let e=this.om(this.$props.container());if(!e)return;const s=this.G.parentElement===e;$(this.G,"data-portal",t),t?s||(this.G.remove(),e.append(this.G)):s&&this.G.parentElement===e&&(this.G.remove(),(i=this.el)==null||i.append(this.G))}om(t){return Tt(t)?t:t?document.querySelector(t):document.body}};gs.props={container:null,disabled:!1};let gi=gs;const _t=ht(),ys=class ys extends y{constructor(){super(),new X;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.n=O(D),this.n.vf(this),F(_t)){const e=O(_t);e&&(H(_t,null),e.xb(t),P(()=>e.xb(null)))}}onConnect(t){c(this.bf.bind(this))}bf(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return Pi(this.el,this.Bd(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}else this.el.removeAttribute("style"),this.el.style.display="none"}Bd(){return this.n._l()}};ys.props={placement:null,offset:0,alignOffset:0};let yi=ys;const Me=ht();class lt extends G{constructor(){super(...arguments),this.$b=new Set,this.Ta=w(""),this.e=null,this.sm=this.E.bind(this)}get pm(){return Array.from(this.$b).map(t=>t.Ta())}get value(){return this.Ta()}set value(t){this.E(t)}onSetup(){H(Me,{add:this.qm.bind(this),remove:this.rm.bind(this)})}onAttach(t){F(D)||x(t,"role","radiogroup"),this.setAttributes({value:this.Ta})}onDestroy(){this.$b.clear()}qm(t){this.$b.has(t)||(this.$b.add(t),t.Nd=this.sm,t.Wc(t.Ta()===this.Ta()))}rm(t){t.Nd=null,this.$b.delete(t)}E(t,e){var n;const s=u(this.Ta);if(!t||t===s)return;const i=this.Nh(s),a=this.Nh(t);i==null||i.Wc(!1,e),a==null||a.Wc(!0,e),this.Ta.set(t),(n=this.l)==null||n.call(this,t,e)}Nh(t){for(const e of this.$b)if(t===u(e.Ta))return e;return null}}var Rn=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,ji=(h,t,e,s)=>{for(var i=_n(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Rn(t,e,i),i};const $s=class $s extends y{get values(){return this.e.pm}get value(){return this.e.value}set value(t){this.e.value=t}constructor(){super(),this.e=new lt,this.e.l=this.l.bind(this)}onSetup(){c(this.N.bind(this))}N(){this.e.value=this.$props.value()}l(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}};$s.props={value:""};let Qt=$s;ji([k],Qt.prototype,"values");ji([k],Qt.prototype,"value");var Fn=Object.defineProperty,Hn=Object.getOwnPropertyDescriptor,Nn=(h,t,e,s)=>{for(var i=Hn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Fn(t,e,i),i};const ks=class ks extends y{constructor(){super(),this.zb=w(!1),this.e={Ta:this.$props.value,Wc:this.Wc.bind(this),Nd:null},new X}get checked(){return this.zb()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.zb,"aria-checked":L(this.zb)})}onAttach(t){const e=F(D);x(t,"tabindex",e?"-1":"0"),x(t,"role",e?"menuitemradio":"radio"),c(this.N.bind(this))}onConnect(t){this.tm(),tt(t,this.r.bind(this)),P(this.Fa.bind(this))}Fa(){Re(()=>{O(Me).remove(this.e)},this.connectScope)}tm(){O(Me).add(this.e)}N(){var s,i;const{value:t}=this.$props,e=t();u(this.zb)&&((i=(s=this.e).Nd)==null||i.call(s,e))}r(t){var e,s;u(this.zb)||(this.E(!0,t),this.um(t),(s=(e=this.e).Nd)==null||s.call(e,u(this.$props.value),t))}Wc(t,e){u(this.zb)!==t&&this.E(t,e)}E(t,e){this.zb.set(t),this.dispatch("change",{detail:t,trigger:e})}um(t){this.dispatch("select",{trigger:t})}};ks.props={value:""};let Le=ks;Nn([k],Le.prototype,"checked");var Un=Object.defineProperty,Gn=Object.getOwnPropertyDescriptor,Ke=(h,t,e,s)=>{for(var i=Gn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Un(t,e,i),i};const ws=class ws extends y{constructor(){super(),this.J=w(null),this.B=w([]),this.e=new lt,this.e.l=this.l.bind(this)}get value(){return this.e.value}get disabled(){var t;return!((t=this.B())!=null&&t.length)}onSetup(){this.a=T(),F(D)&&(this.n=O(D));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){var e;(e=this.n)==null||e.wf({Af:this.Af.bind(this)})}getOptions(){const{clipStartTime:t,clipEndTime:e}=this.a.$state,s=t(),i=e()||1/0;return this.B().map((a,n)=>({cue:a,value:n.toString(),label:a.text,startTime:le(Math.max(0,a.startTime-s)),duration:Wt(Math.min(i,a.endTime)-Math.max(s,a.startTime))}))}Af(){u(()=>this.Qb())}onConnect(t){c(this.Qb.bind(this)),c(this.sa.bind(this)),c(this.vm.bind(this)),Ve(this.a.textTracks,"chapters",this.J.set)}vm(){const t=this.J();if(!t)return;const e=this.Id.bind(this,t);return e(),m(t,"add-cue",e),m(t,"remove-cue",e),()=>{this.B.set([])}}Id(t){const{clipStartTime:e,clipEndTime:s}=this.a.$state,i=e(),a=s()||1/0;this.B.set([...t.cues].filter(n=>n.startTime<=a&&n.endTime>=i))}Qb(){var d;if(!((d=this.n)!=null&&d.T()))return;if(!this.J()){this.e.value="-1";return}const{realCurrentTime:e,clipStartTime:s,clipEndTime:i}=this.a.$state,a=s(),n=i()||1/0,r=e(),o=this.B().findIndex(l=>Bi(l,r));this.e.value=o.toString(),o>=0&&Ht(()=>{if(!this.connectScope)return;const l=this.B()[o],p=this.el.querySelector("[aria-checked='true']"),f=Math.max(a,l.startTime),b=Math.min(n,l.endTime)-f,g=Math.max(0,r-f)/b*100;p&&Q(p,"--progress",M(g,3)+"%")})}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}l(t,e){if(this.disabled||!e)return;const s=+t,i=this.B(),{clipStartTime:a}=this.a.$state;W(s)&&(i!=null&&i[s])&&(this.e.value=s.toString(),this.a.remote.seek(i[s].startTime-a(),e),this.dispatch("change",{detail:i[s],trigger:e}))}};ws.props={thumbnails:null};let Pt=ws;Ke([k],Pt.prototype,"value");Ke([k],Pt.prototype,"disabled");Ke([C],Pt.prototype,"getOptions");var Kn=Object.defineProperty,Wn=Object.getOwnPropertyDescriptor,We=(h,t,e,s)=>{for(var i=Wn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Kn(t,e,i),i};const Ts=class Ts extends y{get value(){return this.e.value}get disabled(){const{audioTracks:t}=this.a.$state;return t().length<=1}constructor(){super(),this.e=new lt,this.e.l=this.l.bind(this)}onSetup(){this.a=T(),F(D)&&(this.n=O(D))}onConnect(t){c(this.N.bind(this)),c(this.sa.bind(this)),c(this.Ua.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}N(){this.e.value=this.Y()}Ua(){var i;const{emptyLabel:t}=this.$props,{audioTrack:e}=this.a.$state,s=e();(i=this.n)==null||i._b.set((s==null?void 0:s.label)??t())}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}Y(){const{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}l(t,e){if(this.disabled)return;const s=this.a.audioTracks.toArray().findIndex(i=>i.label.toLowerCase()===t);if(s>=0){const i=this.a.audioTracks[s];this.a.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:i,trigger:e})}}};Ts.props={emptyLabel:"Default"};let xt=Ts;We([k],xt.prototype,"value");We([k],xt.prototype,"disabled");We([C],xt.prototype,"getOptions");var Qn=Object.defineProperty,Xn=Object.getOwnPropertyDescriptor,Qe=(h,t,e,s)=>{for(var i=Xn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Qn(t,e,i),i};const Yn=[1,1.25,1.5,1.75,2,2.5,3,4],vs=class vs extends y{get value(){return this.e.value}get disabled(){const{gains:t}=this.$props,{canSetAudioGain:e}=this.a.$state;return!e()||t().length===0}constructor(){super(),this.e=new lt,this.e.l=this.l.bind(this)}onSetup(){this.a=T(),F(D)&&(this.n=O(D))}onConnect(t){c(this.N.bind(this)),c(this.Ua.bind(this)),c(this.sa.bind(this))}getOptions(){const{gains:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1||s===null?e:String(s*100)+"%",value:s.toString()}))}N(){this.e.value=this.Y()}Ua(){var i;const{normalLabel:t}=this.$props,{audioGain:e}=this.a.$state,s=e();(i=this.n)==null||i._b.set(s===1||s==null?t():String(s*100)+"%")}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}Y(){var e;const{audioGain:t}=this.a.$state;return((e=t())==null?void 0:e.toString())??"1"}l(t,e){if(this.disabled)return;const s=+t;this.a.remote.changeAudioGain(s,e),this.dispatch("change",{detail:s,trigger:e})}};vs.props={normalLabel:"Disabled",gains:Yn};let St=vs;Qe([k],St.prototype,"value");Qe([k],St.prototype,"disabled");Qe([C],St.prototype,"getOptions");var zn=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,Xe=(h,t,e,s)=>{for(var i=Bn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&zn(t,e,i),i};const Ps=class Ps extends y{get value(){return this.e.value}get disabled(){const{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),this.e=new lt,this.e.l=this.l.bind(this)}onSetup(){this.a=T(),F(D)&&(this.n=O(D))}onConnect(t){var e;(e=super.onConnect)==null||e.call(this,t),c(this.N.bind(this)),c(this.sa.bind(this)),c(this.Ua.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(V).map(s=>({track:s,label:s.label,value:this.Df(s)}))]}N(){this.e.value=this.Y()}Ua(){var i;const{offLabel:t}=this.$props,{textTrack:e}=this.a.$state,s=e();(i=this.n)==null||i._b.set(s&&V(s)&&s.mode==="showing"?s.label:t())}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}Y(){const{textTrack:t}=this.a.$state,e=t();return e&&V(e)&&e.mode==="showing"?this.Df(e):"off"}l(t,e){if(this.disabled)return;if(t==="off"){const i=this.a.textTracks.selected;if(i){const a=this.a.textTracks.indexOf(i);this.a.remote.changeTextTrackMode(a,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.a.textTracks.toArray().findIndex(i=>this.Df(i)===t);if(s>=0){const i=this.a.textTracks[s];this.a.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:i,trigger:e})}}Df(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}};Ps.props={offLabel:"Off"};let At=Ps;Xe([k],At.prototype,"value");Xe([k],At.prototype,"disabled");Xe([C],At.prototype,"getOptions");var Jn=Object.defineProperty,Zn=Object.getOwnPropertyDescriptor,Ye=(h,t,e,s)=>{for(var i=Zn(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&Jn(t,e,i),i};const tr=[.25,.5,.75,1,1.25,1.5,1.75,2],xs=class xs extends y{get value(){return this.e.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||t().length===0}constructor(){super(),this.e=new lt,this.e.l=this.l.bind(this)}onSetup(){this.a=T(),F(D)&&(this.n=O(D))}onConnect(t){c(this.N.bind(this)),c(this.Ua.bind(this)),c(this.sa.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1?e:s+"×",value:s.toString()}))}N(){this.e.value=this.Y()}Ua(){var i;const{normalLabel:t}=this.$props,{playbackRate:e}=this.a.$state,s=e();(i=this.n)==null||i._b.set(s===1?t():s+"×")}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}Y(){const{playbackRate:t}=this.a.$state;return t().toString()}l(t,e){if(this.disabled)return;const s=+t;this.a.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}};xs.props={normalLabel:"Normal",rates:tr};let Et=xs;Ye([k],Et.prototype,"value");Ye([k],Et.prototype,"disabled");Ye([C],Et.prototype,"getOptions");var er=Object.defineProperty,sr=Object.getOwnPropertyDescriptor,ze=(h,t,e,s)=>{for(var i=sr(t,e),a=h.length-1,n;a>=0;a--)(n=h[a])&&(i=n(t,e,i)||i);return i&&er(t,e,i),i};const Ss=class Ss extends y{constructor(){super(),this.Rc=at(()=>{const{sort:t}=this.$props,{qualities:e}=this.a.$state;return Si(e(),t()==="descending")}),this.e=new lt,this.e.l=this.l.bind(this)}get value(){return this.e.value}get disabled(){const{canSetQuality:t,qualities:e}=this.a.$state;return!t()||e().length<=1}onSetup(){this.a=T(),F(D)&&(this.n=O(D))}onConnect(t){c(this.N.bind(this)),c(this.sa.bind(this)),c(this.Ua.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Rc().map(s=>{const i=s.bitrate&&s.bitrate>=0?`${M(s.bitrate/1e6,2)} Mbps`:null;return{quality:s,label:s.height+"p",value:this.Ef(s),bitrate:()=>e()?null:i}})]}N(){this.e.value=this.Y()}Ua(){var a;const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.a.$state,i=s()?s().height+"p":"";(a=this.n)==null||a._b.set(e()?t()+(i?` (${i})`:""):i)}sa(){var t;(t=this.n)==null||t.gb(this.disabled)}l(t,e){if(this.disabled)return;if(t==="auto"){this.a.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}const{qualities:s}=this.a.$state,i=u(s).findIndex(a=>this.Ef(a)===t);if(i>=0){const a=u(s)[i];this.a.remote.changeQuality(i,e),this.dispatch("change",{detail:a,trigger:e})}}Y(){const{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";const s=t();return s?this.Ef(s):"auto"}Ef(t){return t.height+"_"+t.bitrate}};Ss.props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};let Ct=Ss;ze([k],Ct.prototype,"value");ze([k],Ct.prototype,"disabled");ze([C],Ct.prototype,"getOptions");const As=class As extends y{constructor(){super(...arguments),this.p=null,this.Ab=0,this.Oh=-1}onSetup(){this.a=T();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){var e;this.p=(e=this.a.player.el)==null?void 0:e.querySelector("[data-media-provider]"),c(this.wm.bind(this))}wm(){let t=this.$props.event(),e=this.$props.disabled();!this.p||!t||e||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.a.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),m(this.p,t,this.xm.bind(this),{passive:!1}))}xm(t){if(this.$props.disabled()||_s(t)&&(t.button!==0||this.a.activeMenu)||pe(t)&&this.a.activeMenu||_e(t)||!this.ym(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();const e=u(this.$props.event);if(!(e==null?void 0:e.startsWith("dbl")))this.Ab===0&&setTimeout(()=>{this.Ab===1&&this.Ph(t)},250);else if(this.Ab===1){queueMicrotask(()=>this.Ph(t)),clearTimeout(this.Oh),this.Ab=0;return}this.Ab===0&&(this.Oh=window.setTimeout(()=>{this.Ab=0},275)),this.Ab++}Ph(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.zm()&&this.Am(u(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}ym(t){if(!this.el)return!1;if(_s(t)||Ji(t)||pe(t)){const e=pe(t)?t.changedTouches[0]??t.touches[0]:void 0,s=(e==null?void 0:e.clientX)??t.clientX,i=(e==null?void 0:e.clientY)??t.clientY,a=this.el.getBoundingClientRect(),n=i>=a.top&&i<=a.bottom&&s>=a.left&&s<=a.right;return t.type.includes("leave")?!n:n}return!0}zm(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((e,s)=>+getComputedStyle(s).zIndex-+getComputedStyle(e).zIndex)[0]===this.el}Am(t,e){if(!t)return;const s=new R("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[i,a]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek(u(this.a.$state.currentTime)+(+a||0),e):this.a.remote[Zi(i)](e),this.dispatch("trigger",{detail:t,trigger:e})}};As.props={disabled:!1,event:void 0,action:void 0};let $i=As;class ir{constructor(t){this.ca=t,this.priority=10,this.J=null,this.Ya=ma()}attach(){}canRender(){return!0}detach(){this.Ya.empty(),this.ca.reset(),this.J=null}changeTrack(t){!t||this.J===t||(this.Ya.empty(),t.readyState<2?(this.ca.reset(),this.Ya.add(m(t,"load",()=>this.Qh(t),{once:!0}))):this.Qh(t),this.Ya.add(m(t,"add-cue",e=>{this.ca.addCue(e.detail)}),m(t,"remove-cue",e=>{this.ca.removeCue(e.detail)})),this.J=t)}Qh(t){this.ca.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}const wt=class wt extends y{constructor(){super(...arguments),this.ac=-1}get L(){return wt.L}onSetup(){this.a=T(),this.setAttributes({"aria-hidden":L(this.Tb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){this.L()||U(()=>import("./prod-xoumjN75.js").then(e=>e.d),__vite__mapDeps([14,2])).then(e=>this.L.set(e)),c(this.Rh.bind(this))}Tb(){const{textTrack:t,remotePlaybackState:e,iOSControls:s}=this.a.$state,i=t();return s()||e()==="connected"||!i||!V(i)}Rh(){if(!this.L())return;const{viewType:t}=this.a.$state;return t()==="audio"?this.Cm():this.Dm()}Cm(){return c(this.pc.bind(this)),this.Gn(null),()=>{this.el.textContent=""}}pc(){if(this.Tb())return;this.Sh();const{textTrack:t}=this.a.$state;m(t(),"cue-change",this.Sh.bind(this)),c(this.Em.bind(this))}Sh(){this.el.textContent="",this.ac>=0&&this.Ff();const{realCurrentTime:t,textTrack:e}=this.a.$state,{renderVTTCueString:s}=this.L(),i=u(t),a=u(e).activeCues;for(const n of a){const r=this.Th(),o=this.Uh();o.innerHTML=s(n,i),r.append(o),this.el.append(o)}}Em(){const{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.L();e(this.el,t())}Dm(){const{CaptionsRenderer:t}=this.L(),e=new t(this.el),s=new ir(e);return this.a.textRenderers.add(s),c(this.Fm.bind(this,e)),c(this.Gm.bind(this,e)),this.Gn(e),()=>{this.el.textContent="",this.a.textRenderers.remove(s),e.destroy()}}Fm(t){t.dir=this.$props.textDir()}Gm(t){var i;if(this.Tb())return;const{realCurrentTime:e,textTrack:s}=this.a.$state;t.currentTime=e(),this.ac>=0&&((i=s())!=null&&i.activeCues[0])&&this.Ff()}Gn(t){const e=this.a.player;if(!e)return;const s=this.Bm.bind(this,t);m(e,"vds-font-change",s)}Bm(t){var s;if(this.ac>=0){this.Vh();return}const{textTrack:e}=this.a.$state;(s=e())!=null&&s.activeCues[0]?t==null||t.update(!0):this.Hm()}Hm(){var s,i;const t=this.Th();$(t,"data-example","");const e=this.Uh();$(e,"data-example",""),e.textContent=this.$props.exampleText(),t==null||t.append(e),(s=this.el)==null||s.append(t),(i=this.el)==null||i.setAttribute("data-example",""),this.Vh()}Vh(){window.clearTimeout(this.ac),this.ac=window.setTimeout(this.Ff.bind(this),2500)}Ff(){var t,e;(t=this.el)==null||t.removeAttribute("data-example"),(e=this.el)!=null&&e.querySelector("[data-example]")&&(this.el.textContent=""),this.ac=-1}Th(){const t=document.createElement("div");return $(t,"data-part","cue-display"),t}Uh(){const t=document.createElement("div");return $(t,"data-part","cue"),t}};wt.props={textDir:"ltr",exampleText:"Captions look like this."},wt.L=w(null);let ki=wt;const he=class he extends y{constructor(){super(...arguments),this.Xh=""}onSetup(){this.a=T(),this.Mb(),this.Wh(),this.Ca(),this.Ea()}onAttach(t){t.style.setProperty("pointer-events","none"),c(this.kf.bind(this)),c(this.Mb.bind(this)),c(this.Wh.bind(this)),c(this.Ca.bind(this)),c(this.Ea.bind(this));const{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.Pc.bind(this),"data-error":this.fb.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){c(this.Im.bind(this)),c(this.Ma.bind(this))}fb(){const{error:t}=this.$state;return!it(t())}Im(){const{canLoadPoster:t,poster:e}=this.a.$state;!t()&&e()&&qt(e(),"preconnect")}Ea(){const{src:t}=this.$props,{poster:e,nativeControls:s}=this.a.$state;this.el&&$(this.el,"display",s()?"none":null),this.$state.hidden.set(this.fb()||!(t()||e())||s())}Pc(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}kf(){const t=this.$state.img();t&&(m(t,"load",this.gd.bind(this)),m(t,"error",this.Q.bind(this)))}Mb(){const{poster:t}=this.a.$props,{canLoadPoster:e,providedPoster:s,inferredPoster:i}=this.a.$state,a=this.$props.src()||"",n=a||t()||i();this.Xh===s()&&s.set(a),this.$state.src.set(e()&&n.length?n:null),this.Xh=a}Wh(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.a.$state;e.set(t()||s()?this.$props.alt():null)}Ca(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:i}=this.a.$state,a=t()!==null?t():s();e.set(/ytimg\.com|vimeo/.test(i()||"")?null:a===!0?"anonymous":a)}Ma(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:i}=this.a.$state;t.set(s()&&!!i()),e.set(null)}gd(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}Q(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}};he.props={src:null,alt:null,crossOrigin:null},he.state=new rt({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});let wi=he;const oe=class oe extends y{constructor(){super(...arguments),this.Xc=w(null),this.Lc=w(!0),this.Mc=w(!0)}onSetup(){this.a=T(),this.Yh();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.Zh.bind(this)}),new Ii({callback:this.gf.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||c(this.Jm.bind(this)),c(this.Yh.bind(this))}onConnect(t){P(xi(t,this.Lc.set)),c(this.Ea.bind(this)),c(this.Km.bind(this))}gf(t){this.Mc.set(t[0].isIntersecting)}Ea(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Lc()||!this.Mc())}Km(){if(!this.$props.toggle()){this.Xc.set(null);return}this.el&&tt(this.el,this.Lm.bind(this))}Yh(){const{hidden:t,timeText:e}=this.$state,{duration:s}=this.a.$state;if(t())return;const{type:i,padHours:a,padMinutes:n,showHours:r}=this.$props,o=this.Mm(i()),d=s(),l=this.Zh();if(!Number.isFinite(o+d)){e.set("LIVE");return}const p=l?Math.max(0,d-o):o,f=le(p,{padHrs:a(),padMins:n(),showHrs:r()});e.set((l?"-":"")+f)}Jm(){if(!this.el)return;const{toggle:t}=this.$props;$(this.el,"role",t()?"timer":null),$(this.el,"tabindex",t()?0:null)}Mm(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.a.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}Zh(){return this.$props.remainder()&&this.Xc()!==!1}Lm(t){if(t.preventDefault(),this.Xc()===null){this.Xc.set(!this.$props.remainder());return}this.Xc.set(e=>!e)}};oe.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1},oe.state=new rt({timeText:"",hidden:!1});let Ti=oe;export{ei as A,Qt as B,ai as C,Ce as D,fi as E,X as F,$i as G,mi as H,bi as I,ft as J,bt as K,ci as L,Ae as M,wi as N,wa as O,hi as P,Ct as Q,Le as R,oi as S,di as T,K as U,pi as V,me as W,rr as a,De as b,Ti as c,ni as d,ri as e,ii as f,xt as g,At as h,nt as i,yi as j,Et as k,qe as l,Oe as m,ui as n,vt as o,ki as p,Bs as q,Js as r,si as s,Rt as t,Ee as u,Zs as v,ti as w,gi as x,Pt as y,St as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/vidstack-audio-teIaHloW.js","assets/vidstack-CSaHpIQV-DeQqZ8Mz.js","assets/app-io1X_paZ.js","assets/vidstack-DqOrqs52-QmnD5uYy.js","assets/vidstack-D6ttsqNA-vOukfkOx.js","assets/vidstack-video-FA42qs_1.js","assets/vidstack-dash-84xYYbQv.js","assets/vidstack-hls-1C8sHImq.js","assets/vidstack-vimeo-JIR8dgEu.js","assets/vidstack-CW1cJiXX-iOlrX5wF.js","assets/vidstack-BInq9zTH-fGAq8GWc.js","assets/vidstack-youtube-Lb7P_pCv.js","assets/vidstack-DscYSLiW-_wDIXJ0I.js","assets/vidstack-g0pCq79a-_ZMTWLEr.js","assets/prod-xoumjN75.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
